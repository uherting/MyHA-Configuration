####################################################################
# BINARY SENSORS


####################################################################
# WiFi status

  - platform: status
    name: ${wifi_status_name}
    id: ${wifi_status_id}

####################################################################
# PIR

  - platform: gpio
    name: $pir01_name
    id: ${pir01_id}
    pin:
      mcp23017: ${mcp23017_hub01_id}
      number: !secret MCP23017_PIN_A0
      # mode can be INPUT, INPUT_PULLUP or OUTPUT
      mode: INPUT
      inverted: false
    device_class: motion

    # fallback automation while the device is offline:
    on_press:
      then:
        - lambda: |-
            if (!id(${wifi_status_id}).state) {
              id(${binary_template_sensor_01_id}).publish_state(true);
              id(${ssr01_id}).turn_on();
            }
        - delay: !secret DELAY_01MIN
        - lambda: |-
            if (id(${binary_template_sensor_01_id}).state) {
              id(${ssr01_id}).turn_off();
              id(${binary_template_sensor_01_id}).publish_state(false);
            }

  - platform: gpio
    name: $pir02_name
    id: ${pir02_id}
    pin:
      mcp23017: ${mcp23017_hub01_id}
      number: !secret MCP23017_PIN_A1
      # mode can be INPUT, INPUT_PULLUP or OUTPUT
      mode: INPUT
      inverted: false
    device_class: motion

    # fallback automation while the device is offline:
    on_press:
      then:
        - lambda: |-
            if (!id(${wifi_status_id}).state) {
              id(${binary_template_sensor_02_id}).publish_state(true);
              id(${ssr02_id}).turn_on();
            }
        - delay: !secret DELAY_01MIN
        - lambda: |-
            if (id(${binary_template_sensor_02_id}).state) {
              id(${ssr02_id}).turn_off();
              id(${binary_template_sensor_02_id}).publish_state(false);
            }

####################################################################
# TOUCH BUTTON

# yet to be defined!
# see: a_template_for_TB_config.yaml

# ############################################################
#  END OF FILE
# ############################################################
