/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function e(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */}const t="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,n=(e,t,n=null)=>{for(;t!==n;){const n=t.nextSibling;e.removeChild(t),t=n}},r=`{{lit-${String(Math.random()).slice(2)}}}`,i=`\x3c!--${r}--\x3e`,o=new RegExp(`${r}|${i}`);class a{constructor(e,t){this.parts=[],this.element=t;const n=[],i=[],a=document.createTreeWalker(t.content,133,null,!1);let u=0,d=-1,h=0;const{strings:p,values:{length:f}}=e;for(;h<f;){const e=a.nextNode();if(null!==e){if(d++,1===e.nodeType){if(e.hasAttributes()){const t=e.attributes,{length:n}=t;let r=0;for(let e=0;e<n;e++)s(t[e].name,"$lit$")&&r++;for(;r-- >0;){const t=p[h],n=l.exec(t)[2],r=n.toLowerCase()+"$lit$",i=e.getAttribute(r);e.removeAttribute(r);const a=i.split(o);this.parts.push({type:"attribute",index:d,name:n,strings:a}),h+=a.length-1}}"TEMPLATE"===e.tagName&&(i.push(e),a.currentNode=e.content)}else if(3===e.nodeType){const t=e.data;if(t.indexOf(r)>=0){const r=e.parentNode,i=t.split(o),a=i.length-1;for(let t=0;t<a;t++){let n,o=i[t];if(""===o)n=c();else{const e=l.exec(o);null!==e&&s(e[2],"$lit$")&&(o=o.slice(0,e.index)+e[1]+e[2].slice(0,-"$lit$".length)+e[3]),n=document.createTextNode(o)}r.insertBefore(n,e),this.parts.push({type:"node",index:++d})}""===i[a]?(r.insertBefore(c(),e),n.push(e)):e.data=i[a],h+=a}}else if(8===e.nodeType)if(e.data===r){const t=e.parentNode;null!==e.previousSibling&&d!==u||(d++,t.insertBefore(c(),e)),u=d,this.parts.push({type:"node",index:d}),null===e.nextSibling?e.data="":(n.push(e),d--),h++}else{let t=-1;for(;-1!==(t=e.data.indexOf(r,t+1));)this.parts.push({type:"node",index:-1}),h++}}else a.currentNode=i.pop()}for(const e of n)e.parentNode.removeChild(e)}}const s=(e,t)=>{const n=e.length-t.length;return n>=0&&e.slice(n)===t},u=e=>-1!==e.index,c=()=>document.createComment(""),l=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function d(e,t){const{element:{content:n},parts:r}=e,i=document.createTreeWalker(n,133,null,!1);let o=p(r),a=r[o],s=-1,u=0;const c=[];let l=null;for(;i.nextNode();){s++;const e=i.currentNode;for(e.previousSibling===l&&(l=null),t.has(e)&&(c.push(e),null===l&&(l=e)),null!==l&&u++;void 0!==a&&a.index===s;)a.index=null!==l?-1:a.index-u,o=p(r,o),a=r[o]}c.forEach((e=>e.parentNode.removeChild(e)))}const h=e=>{let t=11===e.nodeType?0:1;const n=document.createTreeWalker(e,133,null,!1);for(;n.nextNode();)t++;return t},p=(e,t=-1)=>{for(let n=t+1;n<e.length;n++){const t=e[n];if(u(t))return n}return-1};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const f=new WeakMap,m=e=>"function"==typeof e&&f.has(e),v={},g={};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class y{constructor(e,t,n){this.__parts=[],this.template=e,this.processor=t,this.options=n}update(e){let t=0;for(const n of this.__parts)void 0!==n&&n.setValue(e[t]),t++;for(const e of this.__parts)void 0!==e&&e.commit()}_clone(){const e=t?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),n=[],r=this.template.parts,i=document.createTreeWalker(e,133,null,!1);let o,a=0,s=0,c=i.nextNode();for(;a<r.length;)if(o=r[a],u(o)){for(;s<o.index;)s++,"TEMPLATE"===c.nodeName&&(n.push(c),i.currentNode=c.content),null===(c=i.nextNode())&&(i.currentNode=n.pop(),c=i.nextNode());if("node"===o.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(c.previousSibling),this.__parts.push(e)}else this.__parts.push(...this.processor.handleAttributeExpressions(c,o.name,o.strings,this.options));a++}else this.__parts.push(void 0),a++;return t&&(document.adoptNode(e),customElements.upgrade(e)),e}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const _=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:e=>e}),b=` ${r} `;class w{constructor(e,t,n,r){this.strings=e,this.values=t,this.type=n,this.processor=r}getHTML(){const e=this.strings.length-1;let t="",n=!1;for(let o=0;o<e;o++){const e=this.strings[o],a=e.lastIndexOf("\x3c!--");n=(a>-1||n)&&-1===e.indexOf("--\x3e",a+1);const s=l.exec(e);t+=null===s?e+(n?b:i):e.substr(0,s.index)+s[1]+s[2]+"$lit$"+s[3]+r}return t+=this.strings[e],t}getTemplateElement(){const e=document.createElement("template");let t=this.getHTML();return void 0!==_&&(t=_.createHTML(t)),e.innerHTML=t,e}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const x=e=>null===e||!("object"==typeof e||"function"==typeof e),S=e=>Array.isArray(e)||!(!e||!e[Symbol.iterator]);class ${constructor(e,t,n){this.dirty=!0,this.element=e,this.name=t,this.strings=n,this.parts=[];for(let e=0;e<n.length-1;e++)this.parts[e]=this._createPart()}_createPart(){return new k(this)}_getValue(){const e=this.strings,t=e.length-1,n=this.parts;if(1===t&&""===e[0]&&""===e[1]){const e=n[0].value;if("symbol"==typeof e)return String(e);if("string"==typeof e||!S(e))return e}let r="";for(let i=0;i<t;i++){r+=e[i];const t=n[i];if(void 0!==t){const e=t.value;if(x(e)||!S(e))r+="string"==typeof e?e:String(e);else for(const t of e)r+="string"==typeof t?t:String(t)}}return r+=e[t],r}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class k{constructor(e){this.value=void 0,this.committer=e}setValue(e){e===v||x(e)&&e===this.value||(this.value=e,m(e)||(this.committer.dirty=!0))}commit(){for(;m(this.value);){const e=this.value;this.value=v,e(this)}this.value!==v&&this.committer.commit()}}class O{constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(c()),this.endNode=e.appendChild(c())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=c()),e.__insert(this.endNode=c())}insertAfterPart(e){e.__insert(this.startNode=c()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){if(null===this.startNode.parentNode)return;for(;m(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=v,e(this)}const e=this.__pendingValue;e!==v&&(x(e)?e!==this.value&&this.__commitText(e):e instanceof w?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):S(e)?this.__commitIterable(e):e===g?(this.value=g,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){const t=this.startNode.nextSibling,n="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=n:this.__commitNode(document.createTextNode(n)),this.value=e}__commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof y&&this.value.template===t)this.value.update(e.values);else{const n=new y(t,e.processor,this.options),r=n._clone();n.update(e.values),this.__commitNode(r),this.value=n}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let n,r=0;for(const i of e)n=t[r],void 0===n&&(n=new O(this.options),t.push(n),0===r?n.appendIntoPart(this):n.insertAfterPart(t[r-1])),n.setValue(i),n.commit(),r++;r<t.length&&(t.length=r,this.clear(n&&n.endNode))}clear(e=this.startNode){n(this.startNode.parentNode,e.nextSibling,this.endNode)}}class E{constructor(e,t,n){if(this.value=void 0,this.__pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=n}setValue(e){this.__pendingValue=e}commit(){for(;m(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=v,e(this)}if(this.__pendingValue===v)return;const e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=v}}class N extends ${constructor(e,t,n){super(e,t,n),this.single=2===n.length&&""===n[0]&&""===n[1]}_createPart(){return new P(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class P extends k{}let T=!1;(()=>{try{const e={get capture(){return T=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}})();class I{constructor(e,t,n){this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=n,this.__boundHandleEvent=e=>this.handleEvent(e)}setValue(e){this.__pendingValue=e}commit(){for(;m(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=v,e(this)}if(this.__pendingValue===v)return;const e=this.__pendingValue,t=this.value,n=null==e||null!=t&&(e.capture!==t.capture||e.once!==t.once||e.passive!==t.passive),r=null!=e&&(null==t||n);n&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),r&&(this.__options=C(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=v}handleEvent(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}const C=e=>e&&(T?{capture:e.capture,passive:e.passive,once:e.once}:e.capture)
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */;function Z(e){let t=M.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},M.set(e.type,t));let n=t.stringsArray.get(e.strings);if(void 0!==n)return n;const i=e.strings.join(r);return n=t.keyString.get(i),void 0===n&&(n=new a(e,e.getTemplateElement()),t.keyString.set(i,n)),t.stringsArray.set(e.strings,n),n}const M=new Map,j=new WeakMap;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const A=new
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class{handleAttributeExpressions(e,t,n,r){const i=t[0];if("."===i){return new N(e,t.slice(1),n).parts}if("@"===i)return[new I(e,t.slice(1),r.eventContext)];if("?"===i)return[new E(e,t.slice(1),n)];return new $(e,t,n).parts}handleTextExpression(e){return new O(e)}};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.1");const V=(e,...t)=>new w(e,t,"html",A)
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */,D=(e,t)=>`${e}--${t}`;let U=!0;void 0===window.ShadyCSS?U=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),U=!1);const R=e=>t=>{const n=D(t.type,e);let i=M.get(n);void 0===i&&(i={stringsArray:new WeakMap,keyString:new Map},M.set(n,i));let o=i.stringsArray.get(t.strings);if(void 0!==o)return o;const s=t.strings.join(r);if(o=i.keyString.get(s),void 0===o){const n=t.getTemplateElement();U&&window.ShadyCSS.prepareTemplateDom(n,e),o=new a(t,n),i.keyString.set(s,o)}return i.stringsArray.set(t.strings,o),o},L=["html","svg"],z=new Set,F=(e,t,n)=>{z.add(e);const r=n?n.element:document.createElement("template"),i=t.querySelectorAll("style"),{length:o}=i;if(0===o)return void window.ShadyCSS.prepareTemplateStyles(r,e);const a=document.createElement("style");for(let e=0;e<o;e++){const t=i[e];t.parentNode.removeChild(t),a.textContent+=t.textContent}(e=>{L.forEach((t=>{const n=M.get(D(t,e));void 0!==n&&n.keyString.forEach((e=>{const{element:{content:t}}=e,n=new Set;Array.from(t.querySelectorAll("style")).forEach((e=>{n.add(e)})),d(e,n)}))}))})(e);const s=r.content;n?function(e,t,n=null){const{element:{content:r},parts:i}=e;if(null==n)return void r.appendChild(t);const o=document.createTreeWalker(r,133,null,!1);let a=p(i),s=0,u=-1;for(;o.nextNode();)for(u++,o.currentNode===n&&(s=h(t),n.parentNode.insertBefore(t,n));-1!==a&&i[a].index===u;){if(s>0){for(;-1!==a;)i[a].index+=s,a=p(i,a);return}a=p(i,a)}}(n,a,s.firstChild):s.insertBefore(a,s.firstChild),window.ShadyCSS.prepareTemplateStyles(r,e);const u=s.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==u)t.insertBefore(u.cloneNode(!0),t.firstChild);else if(n){s.insertBefore(a,s.firstChild);const e=new Set;e.add(a),d(n,e)}};window.JSCompiler_renameProperty=(e,t)=>e;const q={toAttribute(e,t){switch(t){case Boolean:return e?"":null;case Object:case Array:return null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){switch(t){case Boolean:return null!==e;case Number:return null===e?null:Number(e);case Object:case Array:return JSON.parse(e)}return e}},H=(e,t)=>t!==e&&(t==t||e==e),W={attribute:!0,type:String,converter:q,reflect:!1,hasChanged:H};class Y extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const e=[];return this._classProperties.forEach(((t,n)=>{const r=this._attributeNameForProperty(n,t);void 0!==r&&(this._attributeToPropertyMap.set(r,n),e.push(r))})),e}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const e=Object.getPrototypeOf(this)._classProperties;void 0!==e&&e.forEach(((e,t)=>this._classProperties.set(t,e)))}}static createProperty(e,t=W){if(this._ensureClassProperties(),this._classProperties.set(e,t),t.noAccessor||this.prototype.hasOwnProperty(e))return;const n="symbol"==typeof e?Symbol():`__${e}`,r=this.getPropertyDescriptor(e,n,t);void 0!==r&&Object.defineProperty(this.prototype,e,r)}static getPropertyDescriptor(e,t,n){return{get(){return this[t]},set(r){const i=this[e];this[t]=r,this.requestUpdateInternal(e,i,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this._classProperties&&this._classProperties.get(e)||W}static finalize(){const e=Object.getPrototypeOf(this);if(e.hasOwnProperty("finalized")||e.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const e=this.properties,t=[...Object.getOwnPropertyNames(e),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]];for(const n of t)this.createProperty(n,e[n])}}static _attributeNameForProperty(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}static _valueHasChanged(e,t,n=H){return n(e,t)}static _propertyValueFromAttribute(e,t){const n=t.type,r=t.converter||q,i="function"==typeof r?r:r.fromAttribute;return i?i(e,n):e}static _propertyValueToAttribute(e,t){if(void 0===t.reflect)return;const n=t.type,r=t.converter;return(r&&r.toAttribute||q.toAttribute)(e,n)}initialize(){this._updateState=0,this._updatePromise=new Promise((e=>this._enableUpdatingResolver=e)),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach(((e,t)=>{if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(t,e)}}))}_applyInstanceProperties(){this._instanceProperties.forEach(((e,t)=>this[t]=e)),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(e,t,n){t!==n&&this._attributeToProperty(e,n)}_propertyToAttribute(e,t,n=W){const r=this.constructor,i=r._attributeNameForProperty(e,n);if(void 0!==i){const e=r._propertyValueToAttribute(t,n);if(void 0===e)return;this._updateState=8|this._updateState,null==e?this.removeAttribute(i):this.setAttribute(i,e),this._updateState=-9&this._updateState}}_attributeToProperty(e,t){if(8&this._updateState)return;const n=this.constructor,r=n._attributeToPropertyMap.get(e);if(void 0!==r){const e=n.getPropertyOptions(r);this._updateState=16|this._updateState,this[r]=n._propertyValueFromAttribute(t,e),this._updateState=-17&this._updateState}}requestUpdateInternal(e,t,n){let r=!0;if(void 0!==e){const i=this.constructor;n=n||i.getPropertyOptions(e),i._valueHasChanged(this[e],t,n.hasChanged)?(this._changedProperties.has(e)||this._changedProperties.set(e,t),!0!==n.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,n))):r=!1}!this._hasRequestedUpdate&&r&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(e,t){return this.requestUpdateInternal(e,t),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(e){}const e=this.performUpdate();return null!=e&&await e,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let e=!1;const t=this._changedProperties;try{e=this.shouldUpdate(t),e?this.update(t):this._markUpdated()}catch(t){throw e=!1,this._markUpdated(),t}e&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(t)),this.updated(t))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._updatePromise}shouldUpdate(e){return!0}update(e){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach(((e,t)=>this._propertyToAttribute(t,this[t],e))),this._reflectingProperties=void 0),this._markUpdated()}updated(e){}firstUpdated(e){}}Y.finalized=!0;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const B=e=>t=>"function"==typeof t?((e,t)=>(window.customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:n,elements:r}=t;return{kind:n,elements:r,finisher(t){window.customElements.define(e,t)}}})(e,t),K=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?Object.assign(Object.assign({},t),{finisher(n){n.createProperty(t.key,e)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(n){n.createProperty(t.key,e)}};function J(e){return(t,n)=>void 0!==n?((e,t,n)=>{t.constructor.createProperty(n,e)})(e,t,n):K(e,t)}const G=e=>function(e){return J({attribute:!1,hasChanged:null==e?void 0:e.hasChanged})}(e)
/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/,Q=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,X=Symbol();class ee{constructor(e,t){if(t!==X)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){return void 0===this._styleSheet&&(Q?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const te=e=>new ee(String(e),X);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */(window.litElementVersions||(window.litElementVersions=[])).push("2.5.1");const ne={};class re extends Y{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const e=this.getStyles();if(Array.isArray(e)){const t=(e,n)=>e.reduceRight(((e,n)=>Array.isArray(n)?t(n,e):(e.add(n),e)),n),n=t(e,new Set),r=[];n.forEach((e=>r.unshift(e))),this._styles=r}else this._styles=void 0===e?[]:[e];this._styles=this._styles.map((e=>{if(e instanceof CSSStyleSheet&&!Q){const t=Array.prototype.slice.call(e.cssRules).reduce(((e,t)=>e+t.cssText),"");return te(t)}return e}))}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow(this.constructor.shadowRootOptions)}adoptStyles(){const e=this.constructor._styles;0!==e.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?Q?this.renderRoot.adoptedStyleSheets=e.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map((e=>e.cssText)),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(e){const t=this.render();super.update(e),t!==ne&&this.constructor.render(t,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach((e=>{const t=document.createElement("style");t.textContent=e.cssText,this.renderRoot.appendChild(t)})))}render(){return ne}}re.finalized=!0,re.render=(e,t,r)=>{if(!r||"object"!=typeof r||!r.scopeName)throw new Error("The `scopeName` option is required.");const i=r.scopeName,o=j.has(t),a=U&&11===t.nodeType&&!!t.host,s=a&&!z.has(i),u=s?document.createDocumentFragment():t;if(((e,t,r)=>{let i=j.get(t);void 0===i&&(n(t,t.firstChild),j.set(t,i=new O(Object.assign({templateFactory:Z},r))),i.appendInto(t)),i.setValue(e),i.commit()})(e,u,Object.assign({templateFactory:R(i)},r)),s){const e=j.get(u);j.delete(u);const r=e.value instanceof y?e.value.template:void 0;F(i,u,r),n(t,t.firstChild),t.appendChild(u),j.set(t,e)}!o&&a&&window.ShadyCSS.styleElement(t.host)},re.shadowRootOptions={mode:"open"};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const ie=new WeakMap,oe=(ae=(...e)=>t=>{let n=ie.get(t);void 0===n&&(n={lastRenderedIndex:2147483647,values:[]},ie.set(t,n));const r=n.values;let i=r.length;n.values=e;for(let o=0;o<e.length&&!(o>n.lastRenderedIndex);o++){const a=e[o];if(x(a)||"function"!=typeof a.then){t.setValue(a),n.lastRenderedIndex=o;break}o<i&&a===r[o]||(n.lastRenderedIndex=2147483647,i=0,Promise.resolve(a).then((e=>{const r=n.values.indexOf(a);r>-1&&r<n.lastRenderedIndex&&(n.lastRenderedIndex=r,t.setValue(e),t.commit())})))}},(...e)=>{const t=ae(...e);return f.set(t,!0),t});var ae,se="[^\\s]+";function ue(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(e[r].substr(0,t));return n}var ce=function(e){return function(t,n){var r=n[e].map((function(e){return e.toLowerCase()})).indexOf(t.toLowerCase());return r>-1?r:null}};function le(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];for(var a in o)e[a]=o[a]}return e}var de=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],he=["January","February","March","April","May","June","July","August","September","October","November","December"],pe=ue(he,3),fe={dayNamesShort:ue(de,3),dayNames:de,monthNamesShort:pe,monthNames:he,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!=10?1:0)*e%10]}},me=(le({},fe),function(e){return+e-1}),ve=[null,"[1-9]\\d?"],ge=[null,se],ye=["isPm",se,function(e,t){var n=e.toLowerCase();return n===t.amPm[0]?0:n===t.amPm[1]?1:null}],_e=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t=(e+"").match(/([+-]|\d\d)/gi);if(t){var n=60*+t[1]+parseInt(t[2],10);return"+"===t[0]?n:-n}return 0}];ce("monthNamesShort"),ce("monthNames");var be,we;!function(){try{(new Date).toLocaleDateString("i")}catch(e){return"RangeError"===e.name}}(),function(){try{(new Date).toLocaleString("i")}catch(e){return"RangeError"===e.name}}(),function(){try{(new Date).toLocaleTimeString("i")}catch(e){return"RangeError"===e.name}}(),(we=be||(be={})).language="language",we.system="system",we.comma_decimal="comma_decimal",we.decimal_comma="decimal_comma",we.space_comma="space_comma",we.none="none";var xe=function(e,t,n,r){r=r||{},n=null==n?{}:n;var i=new Event(t,{bubbles:void 0===r.bubbles||r.bubbles,cancelable:Boolean(r.cancelable),composed:void 0===r.composed||r.composed});return i.detail=n,e.dispatchEvent(i),i};const Se={required:{icon:"cog",name:"Required",secondary:"Required options for this card to function",show:!0},optional:{icon:"tune",name:"Optional",secondary:"Optional configuration to tweak card behavior",show:!1},webrtc:{icon:"webrtc",name:"WebRTC",secondary:"Optional WebRTC parameters",show:!1},advanced:{icon:"cogs",name:"Advanced",secondary:"Advanced options",show:!1}};let $e=class extends re{constructor(){super(...arguments),this._initialized=!1}setConfig(e){this._config=e,this.loadCardHelpers()}shouldUpdate(){return this._initialized||this._initialize(),!0}_getEntities(e){if(!this.hass)return[];const t=Object.keys(this.hass.states).filter((t=>t.substr(0,t.indexOf("."))===e));return t.sort(),t.unshift(""),t}render(){var e,t,n,r,i,o,a,s,u,c,l,d,h,p;if(!this.hass||!this._helpers)return V``;this._helpers.importMoreInfoControl("climate");const f=this._getEntities("camera"),m=this._getEntities("binary_sensor"),v=(null===(e=this._config)||void 0===e?void 0:e.webrtc)&&(null===(t=this._config)||void 0===t?void 0:t.webrtc).entity?(null===(n=this._config)||void 0===n?void 0:n.webrtc).entity:"",g={"":"",live:"Live view",clips:"Clip gallery",snapshots:"Snapshot gallery",clip:"Latest clip",snapshot:"Latest snapshot"},y={"":"",hidden:"Hidden",overlay:"Overlay",above:"Above",below:"Below"},_={"":"",frigate:"Frigate",webrtc:"WebRTC"};return V`
      <div class="card-config">
        <div class="option" @click=${this._toggleOption} .option=${"required"}>
          <div class="row">
            <ha-icon .icon=${`mdi:${Se.required.icon}`}></ha-icon>
            <div class="title">${Se.required.name}</div>
          </div>
          <div class="secondary">${Se.required.secondary}</div>
        </div>
        ${Se.required.show?V`
              <div class="values">
                <paper-dropdown-menu
                  label="Camera Entity (Required)"
                  @value-changed=${this._valueChanged}
                  .configValue=${"camera_entity"}
                >
                  <paper-listbox
                    slot="dropdown-content"
                    .selected=${f.indexOf((null===(r=this._config)||void 0===r?void 0:r.camera_entity)||"")}
                  >
                    ${f.map((e=>V` <paper-item>${e}</paper-item> `))}
                  </paper-listbox>
                </paper-dropdown-menu>
                <paper-input
                  label="Frigate URL (Required)"
                  .value=${(null===(i=this._config)||void 0===i?void 0:i.frigate_url)||""}
                  .configValue=${"frigate_url"}
                  @value-changed=${this._valueChanged}
                ></paper-input>
              </div>
            `:""}
        <div class="option" @click=${this._toggleOption} .option=${"optional"}>
          <div class="row">
            <ha-icon .icon=${`mdi:${Se.optional.icon}`}></ha-icon>
            <div class="title">${Se.optional.name}</div>
          </div>
          <div class="secondary">${Se.optional.secondary}</div>
        </div>
        ${Se.optional.show?V` <div class="values">
              <paper-dropdown-menu
                label="Motion Entity (Optional)"
                @value-changed=${this._valueChanged}
                .configValue=${"motion_entity"}
              >
                <paper-listbox
                  slot="dropdown-content"
                  .selected=${m.indexOf((null===(o=this._config)||void 0===o?void 0:o.motion_entity)||"")}
                >
                  ${m.map((e=>V` <paper-item>${e}</paper-item> `))}
                </paper-listbox>
              </paper-dropdown-menu>
              <paper-input
                label="Frigate camera name (Optional)"
                .value=${(null===(a=this._config)||void 0===a?void 0:a.frigate_camera_name)||""}
                .configValue=${"frigate_camera_name"}
                @value-changed=${this._valueChanged}
              ></paper-input>
              <paper-dropdown-menu
                label="Default view (Optional)"
                @value-changed=${this._valueChanged}
                .configValue=${"view_default"}
              >
                <paper-listbox
                  slot="dropdown-content"
                  .selected=${Object.keys(g).indexOf((null===(s=this._config)||void 0===s?void 0:s.view_default)||"")}
                >
                  ${Object.keys(g).map((e=>V`
                      <paper-item .label="${e}"> ${g[e]} </paper-item>
                    `))}
                </paper-listbox>
              </paper-dropdown-menu>
              <paper-dropdown-menu
                label="Menu mode (Optional)"
                @value-changed=${this._valueChanged}
                .configValue=${"menu_mode"}
              >
                <paper-listbox
                  slot="dropdown-content"
                  .selected=${Object.keys(y).indexOf((null===(u=this._config)||void 0===u?void 0:u.menu_mode)||"")}
                >
                  ${Object.keys(y).map((e=>V`
                      <paper-item .label="${e}"> ${y[e]} </paper-item>
                    `))}
                </paper-listbox>
              </paper-dropdown-menu>
              <paper-input
                label="View timeout (seconds)"
                prevent-invalid-input
                allowed-pattern="[0-9]"
                .value=${(null===(c=this._config)||void 0===c?void 0:c.view_timeout)?String(this._config.view_timeout):""}
                .configValue=${"view_timeout"}
                @value-changed=${this._valueChanged}
              ></paper-input>
              <ha-formfield .label=${"Autoplay latest clip"}>
                <ha-switch
                  .checked=${!0===(null===(l=this._config)||void 0===l?void 0:l.autoplay_clip)}
                  .configValue=${"autoplay_clip"}
                  @change=${this._valueChanged}
                ></ha-switch>
              </ha-formfield>
            </div>`:""}
        <div class="option" @click=${this._toggleOption} .option=${"advanced"}>
          <div class="row">
            <ha-icon .icon=${`mdi:${Se.advanced.icon}`}></ha-icon>
            <div class="title">${Se.advanced.name}</div>
          </div>
          <div class="secondary">${Se.advanced.secondary}</div>
        </div>
        ${Se.advanced.show?V` <div class="values">
                <paper-input
                  label="Frigate zone filter (Optional)"
                  .value=${(null===(d=this._config)||void 0===d?void 0:d.zone)||""}
                  .configValue=${"zone"}
                  @value-changed=${this._valueChanged}
                ></paper-input>
              </div>
              <div class="values">
                <paper-input
                  label="Frigate label/object filter (Optional)"
                  .value=${(null===(h=this._config)||void 0===h?void 0:h.label)||""}
                  .configValue=${"label"}
                  @value-changed=${this._valueChanged}
                ></paper-input>
              </div>`:""}
        <div class="option" @click=${this._toggleOption} .option=${"webrtc"}>
          <div class="row">
            <ha-icon .icon=${`mdi:${Se.webrtc.icon}`}></ha-icon>
            <div class="title">${Se.webrtc.name}</div>
          </div>
          <div class="secondary">${Se.webrtc.secondary}</div>
        </div>
        ${Se.webrtc.show?V` <div class="values">
              <paper-dropdown-menu
                label="WebRTC/Frigate Live provider (Optional)"
                @value-changed=${this._valueChanged}
                .configValue=${"live_provider"}
              >
                <paper-listbox
                  slot="dropdown-content"
                  .selected=${Object.keys(_).indexOf((null===(p=this._config)||void 0===p?void 0:p.live_provider)||"")}
                >
                  ${Object.keys(_).map((e=>V`
                      <paper-item .label="${e}">${_[e]} </paper-item>
                    `))}
                </paper-listbox>
              </paper-dropdown-menu>
              <paper-dropdown-menu
                label="WebRTC Camera Entity (To use with WebRTC Live Provider)"
                @value-changed=${this._valueChanged}
                .configValue=${"webrtc.entity"}
              >
                <paper-listbox
                  slot="dropdown-content"
                  .selected=${f.indexOf(v)}
                >
                  ${f.map((e=>V` <paper-item>${e}</paper-item> `))}
                </paper-listbox>
              </paper-dropdown-menu>
            </div>`:""}
      </div>
    `}_initialize(){void 0!==this.hass&&void 0!==this._config&&void 0!==this._helpers&&(this._initialized=!0)}async loadCardHelpers(){this._helpers=await window.loadCardHelpers()}_toggleOption(e){this._toggleThing(e,Se)}_toggleThing(e,t){const n=!t[e.target.option].show;for(const[e]of Object.entries(t))t[e].show=!1;t[e.target.option].show=n,this._toggle=!this._toggle}_valueChanged(e){if(!this._config||!this.hass)return;const t=e.target;let n=t.configValue;if(!n)return;const r=JSON.parse(JSON.stringify(this._config));let i=r;if(n.includes(".")){const e=n.split(".",2),t=e[0];t in r||(r[t]={}),i=r[t],n=e[1]}void 0!==t.value&&i[n]===t.value||(""===t.value?delete i[n]:i[n]=void 0!==t.checked?t.checked:t.value,this._config=r,xe(this,"config-changed",{config:this._config}))}static get styles(){return te(".option {\n  padding: 4px 0px;\n  cursor: pointer;\n}\n\n.row {\n  display: flex;\n  margin-bottom: -14px;\n  pointer-events: none;\n}\n\n.title {\n  padding-left: 16px;\n  margin-top: -6px;\n  pointer-events: none;\n}\n\n.secondary {\n  padding-left: 40px;\n  color: var(--secondary-text-color);\n  pointer-events: none;\n}\n\n.values {\n  padding-left: 16px;\n  background: var(--secondary-background-color);\n  display: grid;\n}\n\nha-formfield {\n  padding-bottom: 8px;\n}")}};e([J({attribute:!1})],$e.prototype,"hass",void 0),e([G()],$e.prototype,"_config",void 0),e([G()],$e.prototype,"_toggle",void 0),e([G()],$e.prototype,"_helpers",void 0),$e=e([B("frigate-card-editor")],$e);var ke=function(e,t){return(ke=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ke(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ee=function(){return(Ee=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Ne(e,t,n,r){return new(n=n||Promise)((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function Pe(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,(a=i?[2&a[0],i.value]:a)[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function Te(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ie(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Ce(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}var Ze,Me,je=function(){function e(e){this.promise=e}return e.prototype.then=function(t){return new e(this.promise.then(t))},e.all=function(t){return new e(Promise.all(t.map((function(t){return t instanceof e?t.promise:t}))))},e}();(Me=Ze=Ze||{}).assertNever=function(e){throw new Error},Me.arrayToEnum=function(e){var t,n,r={};try{for(var i=Te(e),o=i.next();!o.done;o=i.next()){var a=o.value;r[a]=a}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},Me.getValidEnumValues=function(e){var t,n,r=Me.objectKeys(e).filter((function(t){return"number"!=typeof e[e[t]]})),i={};try{for(var o=Te(r),a=o.next();!a.done;a=o.next()){var s=a.value;i[s]=e[s]}}catch(n){t={error:n}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return Me.objectValues(i)},Me.objectValues=function(e){return Me.objectKeys(e).map((function(t){return e[t]}))},Me.objectKeys="function"==typeof Object.keys?function(e){return Object.keys(e)}:function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n},Me.find=function(e,t){var n,r;try{for(var i=Te(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(t(a))return a}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},Me.isInteger="function"==typeof Number.isInteger?function(e){return Number.isInteger(e)}:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};var Ae,Ve=Ze.arrayToEnum(["invalid_type","custom","invalid_union","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types"]),De=function(e){function t(t){var n=this.constructor,r=e.call(this)||this;return r.issues=[],r.format=function(){var e={_errors:[]},t=function(n){var r,i;try{for(var o=Te(n.issues),a=o.next();!a.done;a=o.next()){var s=a.value;if("invalid_union"===s.code)s.unionErrors.map(t);else if("invalid_return_type"===s.code)t(s.returnTypeError);else if("invalid_arguments"===s.code)t(s.argumentsError);else if(0===s.path.length)e._errors.push(s.message);else for(var u=e,c=0;c<s.path.length;){var l,d=s.path[c];c===s.path.length-1?(u[d]=u[d]||{_errors:[]},u[d]._errors.push(s.message)):"string"==typeof d?u[d]=u[d]||{_errors:[]}:"number"==typeof d&&((l=[])._errors=[],u[d]=u[d]||l),u=u[d],c++}}}catch(n){r={error:n}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}};return t(r),e},r.addIssue=function(e){r.issues=Ce(Ce([],Ie(r.issues)),[e])},r.addIssues=function(e){void 0===e&&(e=[]),r.issues=Ce(Ce([],Ie(r.issues)),Ie(e))},r.flatten=function(e){var t,n;void 0===e&&(e=function(e){return e.message});var i={},o=[];try{for(var a=Te(r.issues),s=a.next();!s.done;s=a.next()){var u=s.value;0<u.path.length?(i[u.path[0]]=i[u.path[0]]||[],i[u.path[0]].push(e(u))):o.push(e(u))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return{formErrors:o,fieldErrors:i}},n=n.prototype,Object.setPrototypeOf?Object.setPrototypeOf(r,n):r.__proto__=n,r.name="ZodError",r.issues=t,r}return Oe(t,e),Object.defineProperty(t.prototype,"errors",{get:function(){return this.issues},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this.message},Object.defineProperty(t.prototype,"message",{get:function(){return JSON.stringify(this.issues,null,2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.issues.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"formErrors",{get:function(){return this.flatten()},enumerable:!1,configurable:!0}),t.create=function(e){return new t(e)},t}(Error),Ue=function(e,t){var n;switch(e.code){case Ve.invalid_type:n="undefined"===e.received?"Required":"Expected "+e.expected+", received "+e.received;break;case Ve.unrecognized_keys:n="Unrecognized key(s) in object: "+e.keys.map((function(e){return"'"+e+"'"})).join(", ");break;case Ve.invalid_union:n="Invalid input";break;case Ve.invalid_enum_value:n="Invalid enum value. Expected "+e.options.map((function(e){return"string"==typeof e?"'"+e+"'":e})).join(" | ")+", received "+("string"==typeof t.data?"'"+t.data+"'":t.data);break;case Ve.invalid_arguments:n="Invalid function arguments";break;case Ve.invalid_return_type:n="Invalid function return type";break;case Ve.invalid_date:n="Invalid date";break;case Ve.invalid_string:n="regex"!==e.validation?"Invalid "+e.validation:"Invalid";break;case Ve.too_small:n="array"===e.type?"Should have "+(e.inclusive?"at least":"more than")+" "+e.minimum+" items":"string"===e.type?"Should be "+(e.inclusive?"at least":"over")+" "+e.minimum+" characters":"number"===e.type?"Value should be greater than "+(e.inclusive?"or equal to ":"")+e.minimum:"Invalid input";break;case Ve.too_big:n="array"===e.type?"Should have "+(e.inclusive?"at most":"less than")+" "+e.maximum+" items":"string"===e.type?"Should be "+(e.inclusive?"at most":"under")+" "+e.maximum+" characters long":"number"===e.type?"Value should be less than "+(e.inclusive?"or equal to ":"")+e.maximum:"Invalid input";break;case Ve.custom:n="Invalid input";break;case Ve.invalid_intersection_types:n="Intersections only support objects";break;default:n=t.defaultError,Ze.assertNever(e)}return{message:n}},Re=Ue,Le=Ze.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ze=function(e){switch(typeof e){case"undefined":return Le.undefined;case"string":return Le.string;case"number":return isNaN(e)?Le.nan:Le.number;case"boolean":return Le.boolean;case"function":return Le.function;case"bigint":return Le.bigint;case"object":return Array.isArray(e)?Le.array:null===e?Le.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?Le.promise:e instanceof Map?Le.map:e instanceof Set?Le.set:e instanceof Date?Le.date:Le.object;default:return Le.unknown}},Fe=function(e,t,n,r){var i=Ce(Ce([],Ie(t)),Ie(r.path||[])),o=Ee(Ee({},r),{path:i});t=Ue(o,{data:e,defaultError:"Invalid input"});return Ee(Ee({},r),{path:i,message:r.message||n(o,{data:e,defaultError:t.message}).message})},qe=function(e){if(null===e)return[];for(var t=new Array(e.count);null!==e;)t[e.count-1]=e.component,e=e.parent;return t},He=function(e){for(var t=null,n=0;n<e.length;n++)t={parent:t,component:e[n],count:n+1};return t},We=function(){function e(e,t,n){this.path=e,this.issues=t,this.params=n}return e.prototype.stepInto=function(t){return new e(null===this.path?{parent:null,count:1,component:t}:{parent:this.path,count:this.path.count+1,component:t},this.issues,this.params)},e.prototype.addIssue=function(e,t){t=Fe(e,qe(this.path),this.params.errorMap,t),this.issues.push(t)},e}(),Ye=Object.freeze({valid:!1}),Be=function(e){return{valid:!0,value:e}},Ke=function(e){return new je(e)},Je=function(e){return!1===e.valid},Ge=function(e){return!0===e.valid},Qe=function(e){return e instanceof je};!function(e){e.errToObj=function(e){return"string"==typeof e?{message:e}:e||{}},e.toString=function(e){return"string"==typeof e?e:null==e?void 0:e.message}}(Ae=Ae||{});var Xe,et=function(e){return e.params.async?[]:null},tt=function(e){var t;return new We(He(e.path||[]),[],{async:null!==(t=e.async)&&void 0!==t&&t,errorMap:e.errorMap||Re})},nt=function(e,t,n){return Ge(t)?{success:!0,data:t.value}:(null!=n&&n.addIssues(e.issues),{success:!1,error:new De(e.issues)})},rt=function(){function e(e){var t=this;this.parse=function(e,n){if((n=t.safeParse(e,n)).success)return n.data;throw n.error},this.safeParse=function(e,n){var r=tt(Ee(Ee({},n),{async:!1}));e=t._parseSync(r,e,ze(e));return nt(r,e,null==n?void 0:n.parentError)},this.parseAsync=function(e,n){return Ne(t,void 0,void 0,(function(){var t;return Pe(this,(function(r){switch(r.label){case 0:return[4,this.safeParseAsync(e,n)];case 1:if((t=r.sent()).success)return[2,t.data];throw t.error}}))}))},this.safeParseAsync=function(e,n){return Ne(t,void 0,void 0,(function(){var t,r;return Pe(this,(function(i){switch(i.label){case 0:return t=tt(Ee(Ee({},n),{async:!0})),r=this._parse(t,e,ze(e)),[4,Qe(r)?r.promise:Promise.resolve(r)];case 1:return r=i.sent(),[2,nt(t,r,null==n?void 0:n.parentError)]}}))}))},this.spa=this.safeParseAsync,this.refine=function(e,n){return t._refinement((function(t,r){function i(){return r.addIssue(Ee({code:Ve.custom},"string"==typeof n||void 0===n?{message:n}:"function"==typeof n?n(t):n))}var o=e(t);return o instanceof Promise?o.then((function(e){return!!e||(i(),!1)})):!!o||(i(),!1)}))},this.refinement=function(e,n){return t._refinement((function(t,r){return!!e(t)||(r.addIssue("function"==typeof n?n(t,r):n),!1)}))},this.superRefine=this._refinement,this.optional=function(){return At.create(t)},this.nullable=function(){return Vt.create(t)},this.nullish=function(){return t.optional().nullable()},this.array=function(){return gt.create(t)},this.promise=function(){return Mt.create(t)},this.isOptional=function(){return t.safeParse(void 0).success},this.isNullable=function(){return t.safeParse(null).success},this._def=e,this.transform=this.transform.bind(this),this.default=this.default.bind(this)}return e.prototype._parseSync=function(e,t,n){if(n=this._parse(e,t,n),Qe(n))throw new Error("Synchronous parse encountered promise.");return n},e.prototype._refinement=function(e){return e=new jt(this instanceof jt?Ee(Ee({},this._def),{effects:Ce(Ce([],Ie(this._def.effects||[])),[{type:"refinement",refinement:e}])}):{schema:this,typeName:It.ZodEffects,effects:[{type:"refinement",refinement:e}]})},e.prototype.or=function(e){return bt.create([this,e])},e.prototype.and=function(e){return xt.create(this,e)},e.prototype.transform=function(e){return new jt({schema:this,typeName:It.ZodEffects,effects:[{type:"transform",transform:e}]})},e.prototype.default=function(e){return new Dt({innerType:this,defaultValue:"function"==typeof e?e:function(){return e},typeName:It.ZodDefault})},e}(),it=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[89ab][a-f0-9]{3}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,ot=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,at=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n._regex=function(e,t,r){return n.refinement((function(t){return e.test(t)}),Ee({validation:t,code:Ve.invalid_string},Ae.errToObj(r)))},n.email=function(e){return new t(Ee(Ee({},n._def),{checks:Ce(Ce([],Ie(n._def.checks)),[Ee({kind:"email"},Ae.errToObj(e))])}))},n.url=function(e){return new t(Ee(Ee({},n._def),{checks:Ce(Ce([],Ie(n._def.checks)),[Ee({kind:"url"},Ae.errToObj(e))])}))},n.uuid=function(e){return new t(Ee(Ee({},n._def),{checks:Ce(Ce([],Ie(n._def.checks)),[Ee({kind:"uuid"},Ae.errToObj(e))])}))},n.regex=function(e,r){return new t(Ee(Ee({},n._def),{checks:Ce(Ce([],Ie(n._def.checks)),[Ee({kind:"regex",regex:e},Ae.errToObj(r))])}))},n.min=function(e,r){return new t(Ee(Ee({},n._def),{checks:Ce(Ce([],Ie(n._def.checks)),[Ee({kind:"min",value:e},Ae.errToObj(r))])}))},n.max=function(e,r){return new t(Ee(Ee({},n._def),{checks:Ce(Ce([],Ie(n._def.checks)),[Ee({kind:"max",value:e},Ae.errToObj(r))])}))},n.nonempty=function(e){return n.min(1,Ae.errToObj(e))},n}return Oe(t,e),t.prototype._parse=function(e,t,n){var r,i;if(n!==Le.string)return e.addIssue(t,{code:Ve.invalid_type,expected:Le.string,received:n}),Ye;var o=!1;try{for(var a=Te(this._def.checks),s=a.next();!s.done;s=a.next()){var u=s.value;if("min"===u.kind)t.length<u.value&&(o=!0,e.addIssue(t,{code:Ve.too_small,minimum:u.value,type:"string",inclusive:!0,message:u.message}));else if("max"===u.kind)t.length>u.value&&(o=!0,e.addIssue(t,{code:Ve.too_big,maximum:u.value,type:"string",inclusive:!0,message:u.message}));else if("email"===u.kind)ot.test(t)||(o=!0,e.addIssue(t,{validation:"email",code:Ve.invalid_string,message:u.message}));else if("uuid"===u.kind)it.test(t)||(o=!0,e.addIssue(t,{validation:"uuid",code:Ve.invalid_string,message:u.message}));else if("url"===u.kind)try{new URL(t)}catch(n){o=!0,e.addIssue(t,{validation:"url",code:Ve.invalid_string,message:u.message})}else"regex"===u.kind&&(u.regex.test(t)||(o=!0,e.addIssue(t,{validation:"regex",code:Ve.invalid_string,message:u.message})))}}catch(n){r={error:n}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o?Ye:Be(t)},t.prototype.length=function(e,t){return this.min(e,t).max(e,t)},Object.defineProperty(t.prototype,"isEmail",{get:function(){return!!this._def.checks.find((function(e){return"email"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isURL",{get:function(){return!!this._def.checks.find((function(e){return"url"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUUID",{get:function(){return!!this._def.checks.find((function(e){return"uuid"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minLength",{get:function(){var e=-1/0;return this._def.checks.map((function(t){"min"===t.kind&&(null===e||t.value>e)&&(e=t.value)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){var e=null;return this._def.checks.map((function(t){"max"===t.kind&&(null===e||t.value<e)&&(e=t.value)})),e},enumerable:!1,configurable:!0}),t.create=function(){return new t({checks:[],typeName:It.ZodString})},t}(rt),st=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.gte=function(e,t){return n.setLimit("min",e,!0,Ae.toString(t))},n.min=n.gte,n.gt=function(e,t){return n.setLimit("min",e,!1,Ae.toString(t))},n.lte=function(e,t){return n.setLimit("max",e,!0,Ae.toString(t))},n.max=n.lte,n.lt=function(e,t){return n.setLimit("max",e,!1,Ae.toString(t))},n.setLimit=function(e,r,i,o){return new t(Ee(Ee({},n._def),{checks:Ce(Ce([],Ie(n._def.checks)),[{kind:e,value:r,inclusive:i,message:Ae.toString(o)}])}))},n.int=function(e){return new t(Ee(Ee({},n._def),{checks:Ce(Ce([],Ie(n._def.checks)),[{kind:"int",message:Ae.toString(e)}])}))},n.positive=function(e){return new t(Ee(Ee({},n._def),{checks:Ce(Ce([],Ie(n._def.checks)),[{kind:"min",value:0,inclusive:!1,message:Ae.toString(e)}])}))},n.negative=function(e){return new t(Ee(Ee({},n._def),{checks:Ce(Ce([],Ie(n._def.checks)),[{kind:"max",value:0,inclusive:!1,message:Ae.toString(e)}])}))},n.nonpositive=function(e){return new t(Ee(Ee({},n._def),{checks:Ce(Ce([],Ie(n._def.checks)),[{kind:"max",value:0,inclusive:!0,message:Ae.toString(e)}])}))},n.nonnegative=function(e){return new t(Ee(Ee({},n._def),{checks:Ce(Ce([],Ie(n._def.checks)),[{kind:"min",value:0,inclusive:!0,message:Ae.toString(e)}])}))},n}return Oe(t,e),t.prototype._parse=function(e,t,n){var r,i;if(n!==Le.number)return e.addIssue(t,{code:Ve.invalid_type,expected:Le.number,received:n}),Ye;var o=!1;try{for(var a=Te(this._def.checks),s=a.next();!s.done;s=a.next()){var u=s.value;"int"===u.kind?Ze.isInteger(t)||(o=!0,e.addIssue(t,{code:Ve.invalid_type,expected:"integer",received:"float",message:u.message})):"min"===u.kind?(u.inclusive?t<u.value:t<=u.value)&&(o=!0,e.addIssue(t,{code:Ve.too_small,minimum:u.value,type:"number",inclusive:u.inclusive,message:u.message})):"max"===u.kind&&(u.inclusive?t>u.value:t>=u.value)&&(o=!0,e.addIssue(t,{code:Ve.too_big,maximum:u.value,type:"number",inclusive:u.inclusive,message:u.message}))}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o?Ye:Be(t)},Object.defineProperty(t.prototype,"minValue",{get:function(){var e,t,n=null;try{for(var r=Te(this._def.checks),i=r.next();!i.done;i=r.next()){var o=i.value;"min"===o.kind&&(null===n||o.value>n)&&(n=o.value)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxValue",{get:function(){var e,t,n=null;try{for(var r=Te(this._def.checks),i=r.next();!i.done;i=r.next()){var o=i.value;"max"===o.kind&&(null===n||o.value<n)&&(n=o.value)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInt",{get:function(){return!!this._def.checks.find((function(e){return"int"===e.kind}))},enumerable:!1,configurable:!0}),t.create=function(){return new t({checks:[],typeName:It.ZodNumber})},t}(rt),ut=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype._parse=function(e,t,n){return n!==Le.bigint?(e.addIssue(t,{code:Ve.invalid_type,expected:Le.bigint,received:n}),Ye):Be(t)},t.create=function(){return new t({typeName:It.ZodBigInt})},t}(rt),ct=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype._parse=function(e,t,n){return n!==Le.boolean?(e.addIssue(t,{code:Ve.invalid_type,expected:Le.boolean,received:n}),Ye):Be(t)},t.create=function(){return new t({typeName:It.ZodBoolean})},t}(rt),lt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype._parse=function(e,t,n){return n!==Le.date?(e.addIssue(t,{code:Ve.invalid_type,expected:Le.date,received:n}),Ye):isNaN(t.getTime())?(e.addIssue(t,{code:Ve.invalid_date}),Ye):Be(new Date(t.getTime()))},t.create=function(){return new t({typeName:It.ZodDate})},t}(rt),dt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype._parse=function(e,t,n){return n!==Le.undefined?(e.addIssue(t,{code:Ve.invalid_type,expected:Le.undefined,received:n}),Ye):Be(t)},t.create=function(){return new t({typeName:It.ZodUndefined})},t}(rt),ht=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype._parse=function(e,t,n){return n!==Le.null?(e.addIssue(t,{code:Ve.invalid_type,expected:Le.null,received:n}),Ye):Be(t)},t.create=function(){return new t({typeName:It.ZodNull})},t}(rt),pt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._any=!0,t}return Oe(t,e),t.prototype._parse=function(e,t,n){return Be(t)},t.create=function(){return new t({typeName:It.ZodAny})},t}(rt),ft=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._unknown=!0,t}return Oe(t,e),t.prototype._parse=function(e,t,n){return Be(t)},t.create=function(){return new t({typeName:It.ZodUnknown})},t}(rt),mt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype._parse=function(e,t,n){return e.addIssue(t,{code:Ve.invalid_type,expected:Le.never,received:n}),Ye},t.create=function(){return new t({typeName:It.ZodNever})},t}(rt),vt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype._parse=function(e,t,n){return n!==Le.undefined?(e.addIssue(t,{code:Ve.invalid_type,expected:Le.void,received:n}),Ye):Be(t)},t.create=function(){return new t({typeName:It.ZodVoid})},t}(rt),gt=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.min=function(e,r){return new t(Ee(Ee({},n._def),{minLength:{value:e,message:Ae.toString(r)}}))},n.max=function(e,r){return new t(Ee(Ee({},n._def),{maxLength:{value:e,message:Ae.toString(r)}}))},n.length=function(e,t){return n.min(e,t).max(e,t)},n.nonempty=function(e){return n.min(1,e)},n}return Oe(t,e),t.prototype._parse=function(e,t,n){return function(e,t,n,r){if(n!==Le.array)return e.addIssue(t,{code:Ve.invalid_type,expected:Le.array,received:n}),Ye;var i=!1;null!==r.minLength&&t.length<r.minLength.value&&(i=!0,e.addIssue(t,{code:Ve.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,message:r.minLength.message})),null!==r.maxLength&&t.length>r.maxLength.value&&(i=!0,e.addIssue(t,{code:Ve.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,message:r.maxLength.message}));var o=et(e),a=new Array(t.length),s=r.type,u=function(e,t){Ge(t)?a[e]=t.value:Je(t)?i=!0:null!=o&&o.push(t.promise.then((function(t){return u(e,t)})))};return t.forEach((function(t,n){u(n,s._parse(e.stepInto(n),t,ze(t)))})),null!==o&&0<o.length?Ke(Promise.all(o).then((function(){return i?Ye:Be(a)}))):i?Ye:Be(a)}(e,t,n,this._def)},Object.defineProperty(t.prototype,"element",{get:function(){return this._def.type},enumerable:!1,configurable:!0}),t.create=function(e){return new t({type:e,minLength:null,maxLength:null,typeName:It.ZodArray})},t}(rt);!function(e){e.mergeShapes=function(e,t){return Ee(Ee({},e),t)},e.intersectShapes=function(e,t){var n,r,i=Ze.objectKeys(e),o=Ze.objectKeys(t),a=(i=i.filter((function(e){return-1!==o.indexOf(e)})),{});try{for(var s=Te(i),u=s.next();!u.done;u=s.next()){var c=u.value;a[c]=xt.create(e[c],t[c])}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return Ee(Ee(Ee({},e),t),a)}}(Xe=Xe||{});var yt=function(e){return function(t){return new _t(Ee(Ee({},e),{shape:function(){return Ee(Ee({},e.shape()),t)}}))}},_t=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n._cached=null,n.strict=function(){return new t(Ee(Ee({},n._def),{unknownKeys:"strict"}))},n.strip=function(){return new t(Ee(Ee({},n._def),{unknownKeys:"strip"}))},n.passthrough=function(){return new t(Ee(Ee({},n._def),{unknownKeys:"passthrough"}))},n.nonstrict=n.passthrough,n.augment=yt(n._def),n.extend=yt(n._def),n.setKey=function(e,t){var r;return n.augment(((r={})[e]=t,r))},n.merge=function(e){var r=Xe.mergeShapes(n._def.shape(),e._def.shape());return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:function(){return r},typeName:It.ZodObject})},n.catchall=function(e){return new t(Ee(Ee({},n._def),{catchall:e}))},n.pick=function(e){var r={};return Ze.objectKeys(e).map((function(e){r[e]=n.shape[e]})),new t(Ee(Ee({},n._def),{shape:function(){return r}}))},n.omit=function(e){var r={};return Ze.objectKeys(n.shape).map((function(t){-1===Ze.objectKeys(e).indexOf(t)&&(r[t]=n.shape[t])})),new t(Ee(Ee({},n._def),{shape:function(){return r}}))},n.partial=function(){var e,r={};for(e in n.shape){var i=n.shape[e];r[e]=i.isOptional()?i:i.optional()}return new t(Ee(Ee({},n._def),{shape:function(){return r}}))},n.deepPartial=function(){var e,r={};for(e in n.shape){var i=n.shape[e];r[e]=i instanceof t?i.isOptional()?i:i.deepPartial().optional():i.isOptional()?i:i.optional()}return new t(Ee(Ee({},n._def),{shape:function(){return r}}))},n.required=function(){var e,r={};for(e in n.shape){for(var i=n.shape[e];i instanceof At;)i=i._def.innerType;r[e]=i}return new t(Ee(Ee({},n._def),{shape:function(){return r}}))},n}return Oe(t,e),t.prototype._getCached=function(){if(null!==this._cached)return this._cached;var e=this._def.shape(),t=Ze.objectKeys(e);return this._cached={shape:e,keys:t}},t.prototype._parse=function(e,t,n){var r,i,o,a,s;if(n!==Le.object)return e.addIssue(t,{code:Ve.invalid_type,expected:Le.object,received:n}),Ye;var u=(n=this._getCached()).shape,c=(n=n.keys,!1),l=et(e),d={},h=function(e,n){var r;Ge(n)?(void 0!==(r=n.value)||e in t)&&(d[e]=r):Je(n)?c=!0:null!=l&&l.push(n.promise.then((function(t){return h(e,t)})))};try{for(var p=Te(n),f=p.next();!f.done;f=p.next()){var m=f.value,v=u[m],g=t[m];h(m,v._parse(e.stepInto(m),g,ze(g)))}}catch(e){y={error:e}}finally{try{f&&!f.done&&(r=p.return)&&r.call(p)}finally{if(y)throw y.error}}if(this._def.catchall instanceof mt){var y=this._def.unknownKeys;if("passthrough"===y){var _=Ze.objectKeys(t).filter((function(e){return!(e in u)}));try{for(var b=Te(_),w=b.next();!w.done;w=b.next())m=w.value,d[m]=t[m]}catch(e){i={error:e}}finally{try{w&&!w.done&&(o=b.return)&&o.call(b)}finally{if(i)throw i.error}}}else if("strict"===y)0<(_=Ze.objectKeys(t).filter((function(e){return!(e in u)}))).length&&(c=!0,e.addIssue(t,{code:Ve.unrecognized_keys,keys:_}));else if("strip"!==y)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{var x=this._def.catchall;_=Ze.objectKeys(t).filter((function(e){return!(e in u)}));try{for(var S=Te(_),$=S.next();!$.done;$=S.next())m=$.value,g=t[m],h(m,x._parse(e.stepInto(m),g,ze(g)))}catch(e){a={error:e}}finally{try{$&&!$.done&&(s=S.return)&&s.call(S)}finally{if(a)throw a.error}}}return null!==l&&0<l.length?Ke(Promise.all(l).then((function(){return c?Ye:Be(d)}))):c?Ye:Be(d)},Object.defineProperty(t.prototype,"shape",{get:function(){return this._def.shape()},enumerable:!1,configurable:!0}),t.create=function(e){return new t({shape:function(){return e},unknownKeys:"strip",catchall:mt.create(),typeName:It.ZodObject})},t.strictCreate=function(e){return new t({shape:function(){return e},unknownKeys:"strict",catchall:mt.create(),typeName:It.ZodObject})},t.lazycreate=function(e){return new t({shape:e,unknownKeys:"strip",catchall:mt.create(),typeName:It.ZodObject})},t}(rt),bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype._parse=function(e,t,n){function r(n){var r=n.map((function(e){return new De(e)}));return 1===(n=r.filter((function(e){return"invalid_type"!==e.issues[0].code}))).length?n[0].issues.forEach((function(t){return e.issues.push(t)})):e.addIssue(t,{code:Ve.invalid_union,unionErrors:r}),Ye}var i,o,a=this._def.options;if(e.params.async){var s=a.map((function(){return new We(e.path,[],e.params)}));return je.all(a.map((function(e,r){return e._parse(s[r],t,n)}))).then((function(e){var t,n;try{for(var i=Te(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(Ge(a))return a}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r(s.map((function(e){return e.issues})))}))}var u=[];try{for(var c=Te(a),l=c.next();!l.done;l=c.next()){var d=l.value,h=new We(e.path,[],e.params),p=d._parseSync(h,t,n);if(!Je(p))return p;u.push(h.issues)}}catch(o){i={error:o}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return r(u)},Object.defineProperty(t.prototype,"options",{get:function(){return this._def.options},enumerable:!1,configurable:!0}),t.create=function(e){return new t({options:e,typeName:It.ZodUnion})},t}(rt);function wt(e,t){var n,r,i=ze(e),o=ze(t);if(e===t)return{valid:!0,data:e};if(i!==Le.object||o!==Le.object)return{valid:!1};var a=Ze.objectKeys(t),s=(o=Ze.objectKeys(e).filter((function(e){return-1!==a.indexOf(e)})),Ee(Ee({},e),t));try{for(var u=Te(o),c=u.next();!c.done;c=u.next()){var l=c.value,d=wt(e[l],t[l]);if(!d.valid)return{valid:!1};s[l]=d.data}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return{valid:!0,data:s}}var xt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype._parse=function(e,t,n){function r(n,r){return Je(n)||Je(r)?Ye:(r=wt(n.value,r.value)).valid?Be(r.data):(e.addIssue(t,{code:Ve.invalid_intersection_types}),Ye)}return e.params.async?je.all([this._def.left._parse(e,t,n),this._def.right._parse(e,t,n)]).then((function(e){var t;return r(e=(t=Ie(e,2))[0],t=t[1])})):r(this._def.left._parseSync(e,t,n),this._def.right._parseSync(e,t,n))},t.create=function(e,n){return new t({left:e,right:n,typeName:It.ZodIntersection})},t}(rt),St=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype._parse=function(e,t,n){if(n!==Le.array)return e.addIssue(t,{code:Ve.invalid_type,expected:Le.array,received:n}),Ye;if(t.length>this._def.items.length)return e.addIssue(t,{code:Ve.too_big,maximum:this._def.items.length,inclusive:!0,type:"array"}),Ye;if(t.length<this._def.items.length)return e.addIssue(t,{code:Ve.too_small,minimum:this._def.items.length,inclusive:!0,type:"array"}),Ye;var r=et(e),i=(n=this._def.items,new Array(n.length)),o=!1,a=function(e,t){Ge(t)?i[e]=t.value:Je(t)?o=!0:null!=r&&r.push(t.promise.then((function(t){return a(e,t)})))};return n.forEach((function(n,r){a(r,n._parse(e.stepInto(r),t[r],ze(t[r])))})),null!==r&&0<r.length?Ke(Promise.all(r).then((function(){return o?Ye:Be(i)}))):o?Ye:Be(i)},Object.defineProperty(t.prototype,"items",{get:function(){return this._def.items},enumerable:!1,configurable:!0}),t.create=function(e){return new t({items:e,typeName:It.ZodTuple})},t}(rt),$t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype._parse=function(e,t,n){if(n!==Le.object)return e.addIssue(t,{code:Ve.invalid_type,expected:Le.object,received:n}),Ye;var r,i=et(e),o=this._def.valueType,a={},s=!1,u=function(e,t){Ge(t)?a[e]=t.value:Je(t)?s=!0:null!=i&&i.push(t.promise.then((function(t){return u(e,t)})))};for(r in t)u(r,o._parse(e.stepInto(r),t[r],ze(t[r])));return null!==i&&0<i.length?Ke(Promise.all(i).then((function(){return s?Ye:Be(a)}))):s?Ye:Be(a)},t.create=function(e){return new t({valueType:e,typeName:It.ZodRecord})},t}(rt),kt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype._parse=function(e,t,n){if(n!==Le.map)return e.addIssue(t,{code:Ve.invalid_type,expected:Le.map,received:n}),Ye;var r=this._def.keyType,i=this._def.valueType,o=(t=t,new Map),a=et(e),s=!1,u=function(e,t){Qe(e)||Qe(t)?null!=a&&a.push(je.all([e,t]).promise.then((function(e){e=(t=Ie(e,2))[0];var t=t[1];return u(e,t)}))):Je(e)||Je(t)?s=!0:o.set(e.value,t.value)};return Ce([],Ie(t.entries())).forEach((function(t,n){t=(o=Ie(t,2))[0];var o=o[1];n=e.stepInto(n),t=r._parse(n.stepInto("key"),t,ze(t)),o=i._parse(n.stepInto("value"),o,ze(o));u(t,o)})),null!==a&&0<a.length?Ke(Promise.all(a).then((function(){return s?Ye:Be(o)}))):s?Ye:Be(o)},t.create=function(e,n){return new t({valueType:n,keyType:e,typeName:It.ZodMap})},t}(rt),Ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype._parse=function(e,t,n){if(n!==Le.set)return e.addIssue(t,{code:Ve.invalid_type,expected:Le.set,received:n}),Ye;t=t;var r=this._def.valueType,i=new Set,o=et(e),a=!1,s=function(e){Ge(e)?i.add(e.value):Je(e)?a=!0:null!=o&&o.push(e.promise.then((function(e){return s(e)})))};return Ce([],Ie(t.values())).forEach((function(t,n){return s(r._parse(e.stepInto(n),t,ze(t)))})),null!==o&&0<o.length?Ke(Promise.all(o).then((function(){return a?Ye:Be(i)}))):a?Ye:Be(i)},t.create=function(e){return new t({valueType:e,typeName:It.ZodSet})},t}(rt),Et=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.args=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new t(Ee(Ee({},n._def),{args:St.create(e)}))},n.returns=function(e){return new t(Ee(Ee({},n._def),{returns:e}))},n.implement=function(e){return n.parse(e)},n.strictImplement=function(e){return n.parse(e)},n.validate=n.implement,n}return Oe(t,e),t.prototype._parse=function(e,t,n){var r=this;if(n!==Le.function)return e.addIssue(t,{code:Ve.invalid_type,expected:Le.function,received:n}),Ye;function i(t,n){return Fe(t,qe(e.path),e.params.errorMap,{code:Ve.invalid_arguments,argumentsError:n})}function o(t,n){return Fe(t,qe(e.path),e.params.errorMap,{code:Ve.invalid_return_type,returnTypeError:n})}var a={errorMap:e.params.errorMap},s=t;return this._def.returns instanceof Mt?Be((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ne(r,void 0,void 0,(function(){var t,n,r;return Pe(this,(function(u){switch(u.label){case 0:return t=new De([]),[4,this._def.args.parseAsync(e,a).catch((function(n){throw t.addIssue(i(e,n)),t}))];case 1:return n=u.sent(),[4,s.apply(void 0,Ce([],Ie(n)))];case 2:return r=u.sent(),[4,this._def.returns.parseAsync(r,a).catch((function(e){throw t.addIssue(o(r,e)),t}))];case 3:return[2,u.sent()]}}))}))})):Be((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!(n=r._def.args.safeParse(e,a)).success)throw new De([i(e,n.error)]);var n,u=s.apply(void 0,Ce([],Ie(n.data)));if(!(n=r._def.returns.safeParse(u,a)).success)throw new De([o(u,n.error)]);return n.data}))},t.prototype.parameters=function(){return this._def.args},t.prototype.returnType=function(){return this._def.returns},t.create=function(e,n){return new t({args:e||St.create([]),returns:n||ft.create(),typeName:It.ZodFunction})},t}(rt),Nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),Object.defineProperty(t.prototype,"schema",{get:function(){return this._def.getter()},enumerable:!1,configurable:!0}),t.prototype._parse=function(e,t,n){return this._def.getter()._parse(e,t,n)},t.create=function(e){return new t({getter:e,typeName:It.ZodLazy})},t}(rt),Pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype._parse=function(e,t,n){return t!==this._def.value?(e.addIssue(t,{code:Ve.invalid_type,expected:this._def.value,received:t}),Ye):Be(t)},Object.defineProperty(t.prototype,"value",{get:function(){return this._def.value},enumerable:!1,configurable:!0}),t.create=function(e){return new t({value:e,typeName:It.ZodLiteral})},t}(rt);function Tt(e){return new Ct({values:e,typeName:It.ZodEnum})}var It,Ct=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype._parse=function(e,t,n){return-1===this._def.values.indexOf(t)?(e.addIssue(t,{code:Ve.invalid_enum_value,options:this._def.values}),Ye):Be(t)},Object.defineProperty(t.prototype,"options",{get:function(){return this._def.values},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enum",{get:function(){var e,t,n={};try{for(var r=Te(this._def.values),i=r.next();!i.done;i=r.next()){var o=i.value;n[o]=o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Values",{get:function(){var e,t,n={};try{for(var r=Te(this._def.values),i=r.next();!i.done;i=r.next()){var o=i.value;n[o]=o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Enum",{get:function(){var e,t,n={};try{for(var r=Te(this._def.values),i=r.next();!i.done;i=r.next()){var o=i.value;n[o]=o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!1,configurable:!0}),t.create=Tt,t}(rt),Zt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype._parse=function(e,t,n){var r=Ze.getValidEnumValues(this._def.values);return-1===r.indexOf(t)?(e.addIssue(t,{code:Ve.invalid_enum_value,options:Ze.objectValues(r)}),Ye):Be(t)},t.create=function(e){return new t({values:e,typeName:It.ZodNativeEnum})},t}(rt),Mt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype._parse=function(e,t,n){var r=this;return n!==Le.promise&&!1===e.params.async?(e.addIssue(t,{code:Ve.invalid_type,expected:Le.promise,received:n}),Ye):(t=n===Le.promise?t:Promise.resolve(t),Be(t.then((function(t){return r._def.type.parseAsync(t,{path:qe(e.path),errorMap:e.params.errorMap})}))))},t.create=function(e){return new t({type:e,typeName:It.ZodPromise})},t}(rt),jt=function(e){function t(t){return e.call(this,t)||this}return Oe(t,e),t.prototype.innerType=function(){return this._def.schema},t.prototype._parse=function(e,t,n){var r=!1===e.params.async,i=this._def.effects||[],o={issueFound:!1,addIssue:function(n){this.issueFound=!0,e.addIssue(t,n)},get path(){return qe(e.path)}};function a(e,t){switch(t.type){case"refinement":var n=t.refinement(e,o);if(n instanceof Promise){if(r)throw new Error("You can't use .parse() on a schema containing async refinements. Use .parseAsync instead.");return n.then((function(t){var n=o.issueFound;return s=s||n,e}))}return n=o.issueFound,s=s||n,e;case"transform":if((n=t.transform(e))instanceof Promise&&r)throw new Error("You can't use .parse() on a schema containing async transformations. Use .parseAsync instead.");return n;default:throw new Error("Invalid effect type.")}}o.addIssue=o.addIssue.bind(o);var s=!1;if(r){var u=this._def.schema._parseSync(e,t,n);return Ge(u)?(u=i.reduce(a,u.value),s?Ye:Be(u)):Ye}function c(e){return(e=i.reduce((function(e,t){return e instanceof Promise?e.then((function(e){return a(e,t)})):a(e,t)}),e))instanceof Promise?Ke(e.then((function(e){return s?Ye:Be(e)}))):s?Ye:Be(e)}return n=this._def.schema._parse(e,t,n),Ge(n)?c(n.value):Je(n)?Ye:Ke(n.promise.then((function(e){return Je(e)?Ye:(e=c(e.value),Qe(e)?e.promise:e)})))},t.create=function(e){return new t({schema:e,typeName:It.ZodEffects})},t}(rt),At=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype._parse=function(e,t,n){return n===Le.undefined?Be(void 0):this._def.innerType._parse(e,t,n)},t.prototype.unwrap=function(){return this._def.innerType},t.create=function(e){return new t({innerType:e,typeName:It.ZodOptional})},t}(rt),Vt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype._parse=function(e,t,n){return n===Le.null?Be(null):this._def.innerType._parse(e,t,n)},t.prototype.unwrap=function(){return this._def.innerType},t.create=function(e){return new t({innerType:e,typeName:It.ZodNullable})},t}(rt),Dt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype._parse=function(e,t,n){return n===Le.undefined&&(t=this._def.defaultValue()),this._def.innerType._parse(e,t,ze(t))},t.prototype.removeDefault=function(){return this._def.innerType},t.create=function(e){return new At({innerType:e,typeName:It.ZodOptional})},t}(rt),Ut=function(e,t){return e?pt.create().refine(e,t):pt.create()},Rt={object:_t.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodPromise="ZodPromise"}(It=It||{});var Lt=at.create,zt=st.create,Ft=ut.create,qt=ct.create,Ht=lt.create,Wt=dt.create,Yt=ht.create,Bt=pt.create,Kt=ft.create,Jt=mt.create,Gt=vt.create,Qt=gt.create,Xt=_t.create,en=_t.strictCreate,tn=bt.create,nn=xt.create,rn=St.create,on=$t.create,an=kt.create,sn=Ot.create,un=Et.create,cn=Nt.create,ln=Pt.create,dn=Ct.create,hn=Zt.create,pn=Mt.create,fn=jt.create,mn=At.create,vn=Vt.create,gn=Object.freeze({__proto__:null,ZodParsedType:Le,getParsedType:ze,makeIssue:Fe,EMPTY_PATH:null,pathToArray:qe,pathFromArray:He,ParseContext:We,createRootContext:function(e){var t;return new We(null,[],{async:null!==(t=e.async)&&void 0!==t&&t,errorMap:e.errorMap||Re})},INVALID:Ye,OK:Be,ASYNC:Ke,isInvalid:Je,isOk:Ge,isAsync:Qe,ZodType:rt,ZodString:at,ZodNumber:st,ZodBigInt:ut,ZodBoolean:ct,ZodDate:lt,ZodUndefined:dt,ZodNull:ht,ZodAny:pt,ZodUnknown:ft,ZodNever:mt,ZodVoid:vt,ZodArray:gt,get objectUtil(){return Xe},mergeObjects:function(e){return function(t){var n=Xe.mergeShapes(e._def.shape(),t._def.shape());return new _t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:function(){return n},typeName:It.ZodObject})}},ZodObject:_t,ZodUnion:bt,ZodIntersection:xt,ZodTuple:St,ZodRecord:$t,ZodMap:kt,ZodSet:Ot,ZodFunction:Et,ZodLazy:Nt,ZodLiteral:Pt,ZodEnum:Ct,ZodNativeEnum:Zt,ZodPromise:Mt,ZodEffects:jt,ZodTransformer:jt,ZodOptional:At,ZodNullable:Vt,ZodDefault:Dt,custom:Ut,Schema:rt,ZodSchema:rt,late:Rt,get ZodFirstPartyTypeKind(){return It},any:Bt,array:Qt,bigint:Ft,boolean:qt,date:Ht,effect:fn,enum:dn,function:un,instanceof:function(e,t){return void 0===t&&(t={message:"Input not instance of "+e.name}),Ut((function(t){return t instanceof e}),t)},intersection:nn,lazy:cn,literal:ln,map:an,nativeEnum:hn,never:Jt,null:Yt,nullable:vn,number:zt,object:Xt,oboolean:function(){return qt().optional()},onumber:function(){return zt().optional()},optional:mn,ostring:function(){return Lt().optional()},promise:pn,record:on,set:sn,strictObject:en,string:Lt,transformer:fn,tuple:rn,undefined:Wt,union:tn,unknown:Kt,void:Gt,ZodIssueCode:Ve,quotelessJson:function(e){return JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:")},ZodError:De,defaultErrorMap:Ue,get overrideErrorMap(){return Re},setErrorMap:function(e){Re=e}});const yn=gn.object({camera_entity:gn.string(),motion_entity:gn.string().optional(),frigate_url:gn.string().url(),frigate_camera_name:gn.string().optional(),view_default:gn.enum(["live","clip","clips","snapshot","snapshots"]).optional().default("live"),view_timeout:gn.number().or(gn.string().regex(/^\d+$/).transform((e=>Number(e)))).optional(),live_provider:gn.enum(["frigate","webrtc"]).default("frigate"),webrtc:gn.object({}).passthrough().optional(),label:gn.string().optional(),zone:gn.string().optional(),autoplay_clip:gn.boolean().default(!1),menu_mode:gn.enum(["hidden","overlay","above","below"]).optional().default("hidden"),type:gn.string(),show_warning:gn.boolean().optional(),show_error:gn.boolean().optional(),test_gui:gn.boolean().optional()}),_n=gn.object({camera:gn.string(),end_time:gn.number(),false_positive:gn.boolean(),has_clip:gn.boolean(),has_snapshot:gn.boolean(),id:gn.string(),label:gn.string(),start_time:gn.number(),thumbnail:gn.string(),top_score:gn.number(),zones:gn.string().array()}),bn=gn.array(_n);var wn={version:"Version",invalid_configuration:"Invalid configuration",missing_webrtc:"WebRTC component not found",show_warning:"Show Warning",show_error:"Show Error"},xn={common:wn};const Sn={en:Object.freeze({__proto__:null,common:wn,default:xn})};function $n(e,t="",n=""){const r=(localStorage.getItem("selectedLanguage")||"en").replace(/['"]+/g,"").replace("-","_");let i;try{i=e.split(".").reduce(((e,t)=>e[t]),Sn[r])}catch(t){i=e.split(".").reduce(((e,t)=>e[t]),Sn.en)}return void 0===i&&(i=e.split(".").reduce(((e,t)=>e[t]),Sn.en)),""!==t&&""!==n&&(i=i.replace(t,n)),i}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function kn(e,t){return e(t={exports:{}},t.exports),t.exports}var On=kn((function(e,t){e.exports=function(){var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",o="minute",a="hour",s="day",u="week",c="month",l="quarter",d="year",h="date",p="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},g=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},y={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+g(r,2,"0")+":"+g(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,c),o=n-i<0,a=t.clone().add(r+(o?-1:1),c);return+(-(r+(n-i)/(o?i-a:a-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:u,d:s,D:h,h:a,m:o,s:i,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},_="en",b={};b[_]=v;var w=function(e){return e instanceof k},x=function(e,t,n){var r;if(!e)return _;if("string"==typeof e)b[e]&&(r=e),t&&(b[e]=t,r=e);else{var i=e.name;b[i]=e,r=i}return!n&&r&&(_=r),r||!n&&_},S=function(e,t){if(w(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new k(n)},$=y;$.l=x,$.i=w,$.w=function(e,t){return S(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var k=function(){function v(e){this.$L=x(e.locale,null,!0),this.parse(e)}var g=v.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if($.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(f);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return $},g.isValid=function(){return!(this.$d.toString()===p)},g.isSame=function(e,t){var n=S(e);return this.startOf(t)<=n&&n<=this.endOf(t)},g.isAfter=function(e,t){return S(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<S(e)},g.$g=function(e,t,n){return $.u(e)?this[t]:this.set(n,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var n=this,r=!!$.u(t)||t,l=$.p(e),p=function(e,t){var i=$.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(s)},f=function(e,t){return $.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},m=this.$W,v=this.$M,g=this.$D,y="set"+(this.$u?"UTC":"");switch(l){case d:return r?p(1,0):p(31,11);case c:return r?p(1,v):p(0,v+1);case u:var _=this.$locale().weekStart||0,b=(m<_?m+7:m)-_;return p(r?g-b:g+(6-b),v);case s:case h:return f(y+"Hours",0);case a:return f(y+"Minutes",1);case o:return f(y+"Seconds",2);case i:return f(y+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var n,u=$.p(e),l="set"+(this.$u?"UTC":""),p=(n={},n[s]=l+"Date",n[h]=l+"Date",n[c]=l+"Month",n[d]=l+"FullYear",n[a]=l+"Hours",n[o]=l+"Minutes",n[i]=l+"Seconds",n[r]=l+"Milliseconds",n)[u],f=u===s?this.$D+(t-this.$W):t;if(u===c||u===d){var m=this.clone().set(h,1);m.$d[p](f),m.init(),this.$d=m.set(h,Math.min(this.$D,m.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[$.p(e)]()},g.add=function(r,l){var h,p=this;r=Number(r);var f=$.p(l),m=function(e){var t=S(p);return $.w(t.date(t.date()+Math.round(e*r)),p)};if(f===c)return this.set(c,this.$M+r);if(f===d)return this.set(d,this.$y+r);if(f===s)return m(1);if(f===u)return m(7);var v=(h={},h[o]=t,h[a]=n,h[i]=e,h)[f]||1,g=this.$d.getTime()+r*v;return $.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=$.z(this),o=this.$H,a=this.$m,s=this.$M,u=n.weekdays,c=n.months,l=function(e,n,i,o){return e&&(e[n]||e(t,r))||i[n].substr(0,o)},d=function(e){return $.s(o%12||12,e,"0")},h=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:$.s(s+1,2,"0"),MMM:l(n.monthsShort,s,c,3),MMMM:l(c,s),D:this.$D,DD:$.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,u,2),ddd:l(n.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(o),HH:$.s(o,2,"0"),h:d(1),hh:d(2),a:h(o,a,!0),A:h(o,a,!1),m:String(a),mm:$.s(a,2,"0"),s:String(this.$s),ss:$.s(this.$s,2,"0"),SSS:$.s(this.$ms,3,"0"),Z:i};return r.replace(m,(function(e,t){return t||f[e]||i.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(r,h,p){var f,m=$.p(h),v=S(r),g=(v.utcOffset()-this.utcOffset())*t,y=this-v,_=$.m(this,v);return _=(f={},f[d]=_/12,f[c]=_,f[l]=_/3,f[u]=(y-g)/6048e5,f[s]=(y-g)/864e5,f[a]=y/n,f[o]=y/t,f[i]=y/e,f)[m]||y,p?_:$.a(_)},g.daysInMonth=function(){return this.endOf(c).$D},g.$locale=function(){return b[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=x(e,t,!0);return r&&(n.$L=r),n},g.clone=function(){return $.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},v}(),O=k.prototype;return S.prototype=O,[["$ms",r],["$s",i],["$m",o],["$H",a],["$W",s],["$M",c],["$y",d],["$D",h]].forEach((function(e){O[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),S.extend=function(e,t){return e.$i||(e(t,k,S),e.$i=!0),S},S.locale=x,S.isDayjs=w,S.unix=function(e){return S(1e3*e)},S.en=b[_],S.Ls=b,S.p={},S}()})),En=kn((function(e,t){e.exports=function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,i,o){var a=i.prototype;o.utc=function(e){return new i({date:e,utc:!0,args:arguments})},a.utc=function(t){var n=o(this.toDate(),{locale:this.$L,utc:!0});return t?n.add(this.utcOffset(),e):n},a.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var s=a.parse;a.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),s.call(this,e)};var u=a.init;a.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else u.call(this)};var c=a.utcOffset;a.utcOffset=function(r,i){var o=this.$utils().u;if(o(r))return this.$u?0:o(this.$offset)?c.call(this):this.$offset;if("string"==typeof r&&null===(r=function(e){void 0===e&&(e="");var r=e.match(t);if(!r)return null;var i=(""+r[0]).match(n)||["-",0,0],o=i[0],a=60*+i[1]+ +i[2];return 0===a?0:"+"===o?a:-a}(r)))return this;var a=Math.abs(r)<=16?60*r:r,s=this;if(i)return s.$offset=a,s.$u=0===r,s;if(0!==r){var u=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(a+u,e)).$offset=a,s.$x.$localOffset=u}else s=this.utc();return s};var l=a.format;a.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,t)},a.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||(new Date).getTimezoneOffset());return this.$d.valueOf()-6e4*e},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var d=a.toDate;a.toDate=function(e){return"s"===e&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var h=a.diff;a.diff=function(e,t,n){if(e&&this.$u===e.$u)return h.call(this,e,t,n);var r=this.local(),i=o(e).local();return h.call(r,i,t,n)}}}()})),Nn=kn((function(e,t){e.exports=function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(n,r,i){var o,a=function(e,n,r){void 0===r&&(r={});var i=new Date(e);return function(e,n){void 0===n&&(n={});var r=n.timeZoneName||"short",i=e+"|"+r,o=t[i];return o||(o=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:r}),t[i]=o),o}(n,r).formatToParts(i)},s=function(t,n){for(var r=a(t,n),o=[],s=0;s<r.length;s+=1){var u=r[s],c=u.type,l=u.value,d=e[c];d>=0&&(o[d]=parseInt(l,10))}var h=o[3],p=24===h?0:h,f=o[0]+"-"+o[1]+"-"+o[2]+" "+p+":"+o[4]+":"+o[5]+":000",m=+t;return(i.utc(f).valueOf()-(m-=m%1e3))/6e4},u=r.prototype;u.tz=function(e,t){void 0===e&&(e=o);var n=this.utcOffset(),r=this.toDate(),a=r.toLocaleString("en-US",{timeZone:e}),s=Math.round((r-new Date(a))/1e3/60),u=i(a).$set("millisecond",this.$ms).utcOffset(15*-Math.round(r.getTimezoneOffset()/15)-s,!0);if(t){var c=u.utcOffset();u=u.add(n-c,"minute")}return u.$x.$timezone=e,u},u.offsetName=function(e){var t=this.$x.$timezone||i.tz.guess(),n=a(this.valueOf(),t,{timeZoneName:e}).find((function(e){return"timezonename"===e.type.toLowerCase()}));return n&&n.value};var c=u.startOf;u.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return c.call(this,e,t);var n=i(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return c.call(n,e,t).tz(this.$x.$timezone,!0)},i.tz=function(e,t,n){var r=n&&t,a=n||t||o,u=s(+i(),a);if("string"!=typeof e)return i(e).tz(a);var c=function(e,t,n){var r=e-60*t*1e3,i=s(r,n);if(t===i)return[r,t];var o=s(r-=60*(i-t)*1e3,n);return i===o?[r,i]:[e-60*Math.min(i,o)*1e3,Math.max(i,o)]}(i.utc(e,r).valueOf(),u,a),l=c[0],d=c[1],h=i(l).utcOffset(d);return h.$x.$timezone=a,h},i.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},i.tz.setDefault=function(e){o=e}}}()}));function Pn(e,t,n){if(!e)return!1;if(!n.length)return!1;if(t){for(let r=0;r<n.length;r++){const i=n[r];if(i&&t.states[i]!==e.states[i])return!0}return!1}return!1}On.extend(Nn),On.extend(En),console.info(`%c  FRIGATE-HASS-CARD \n%c  ${$n("common.version")} 0.1.4    `,"color: pink; font-weight: bold; background: black","color: white; font-weight: bold; background: dimgray"),window.customCards=window.customCards||[],window.customCards.push({type:"frigate-card",name:"Frigate Card",description:"A lovelace card for use with Frigate"});let Tn=class extends re{constructor(){super(...arguments),this.menuMode="hidden",this.expand=!1,this.motionEntity=null,this.hass=null,this.actionCallback=null}shouldUpdate(e){const t=e.get("hass");return!t||Pn(this.hass,t,[this.motionEntity])}_renderFrigateButton(){return V` <ha-icon-button
      class="button"
      icon=${"hidden"!=this.menuMode||this.expand?"mdi:alpha-f-box":"mdi:alpha-f-box-outline"}
      data-toggle="tooltip"
      title="Frigate menu"
      @click=${()=>{"hidden"==this.menuMode?this.expand=!this.expand:this._callAction("default")}}
    ></ha-icon-button>`}_callAction(e){this.actionCallback&&this.actionCallback(e)}render(){var e;let t=null;this.motionEntity&&this.hass&&(t="on"==(null===(e=this.hass.states[this.motionEntity])||void 0===e?void 0:e.state)?"mdi:motion-sensor":"mdi:walk");let n="frigate-card-menu-full";return["hidden","overlay"].includes(this.menuMode)&&(n="overlay"==this.menuMode||this.expand?"frigate-card-menu-overlay":"frigate-card-menu-hidden"),V`
      <div class=${n}>
        ${this._renderFrigateButton()}
        ${"hidden"!=this.menuMode||this.expand?V`
              <ha-icon-button
                class="button"
                icon="mdi:cctv"
                data-toggle="tooltip"
                title="View live"
                @click=${()=>{this.expand=!1,this._callAction("live")}}
              ></ha-icon-button>
              <ha-icon-button
                class="button"
                icon="mdi:filmstrip"
                data-toggle="tooltip"
                title="View clips"
                @click=${()=>{this.expand=!1,this._callAction("clips")}}
              ></ha-icon-button>
              <ha-icon-button
                class="button"
                icon="mdi:camera"
                data-toggle="tooltip"
                title="View snapshots"
                @click=${()=>{this.expand=!1,this._callAction("snapshots")}}
              ></ha-icon-button>
              <ha-icon-button
                class="button"
                icon="mdi:web"
                data-toggle="tooltip"
                title="View Frigate UI"
                @click=${()=>{this.expand=!1,this._callAction("frigate-ui")}}
              ></ha-icon-button>
              ${t?V` <ha-icon-button
                    data-toggle="tooltip"
                    title="View motion sensor"
                    class="button"
                    icon="${t}"
                    @click=${()=>{this.expand=!1,this._callAction("motion")}}
                  ></ha-icon-button>`:V``}
            `:""}
      </div>
    `}static get styles(){return te("/* Base: Not used directly */\n.frigate-card-menu-base, .frigate-card-menu-full, .frigate-card-menu-hidden, .frigate-card-menu-overlay {\n  z-index: 1;\n  height: 56px;\n  /* Menu div itself does not handle click events. Without this, in overlay\n     mode, the menu div prevents clicking on gallery items 'behind' the overlay.\n     */\n  pointer-events: none;\n}\n\n/* Small 'F' button for hidden menu */\n.frigate-card-menu-hidden, .frigate-card-menu-overlay {\n  position: absolute;\n  width: 50px;\n}\n\n/* Expanded overlay menu */\n.frigate-card-menu-overlay {\n  width: 100%;\n  background: linear-gradient(90deg, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0));\n}\n\n/* Full above/below menu */\n.frigate-card-menu-full {\n  width: 100%;\n  background: var(--secondary-background-color);\n}\n\nha-icon-button.button {\n  position: relative;\n  z-index: 10;\n  color: var(--secondary-color, white);\n  opacity: 0.8;\n  background-color: rgba(0, 0, 0, 0.6);\n  border-radius: 50%;\n  padding: 0px;\n  margin: 3px;\n  /* Buttons can always be clicked */\n  pointer-events: auto;\n}")}};Tn.FRIGATE_CARD_MENU_ID="frigate-card-menu-id",e([J({attribute:!1})],Tn.prototype,"menuMode",void 0),e([J({attribute:!1})],Tn.prototype,"expand",void 0),e([J({attribute:!1})],Tn.prototype,"motionEntity",void 0),e([J({attribute:!1})],Tn.prototype,"hass",void 0),e([J({attribute:!1})],Tn.prototype,"actionCallback",void 0),Tn=e([B("frigate-card-menu")],Tn);let In=class extends re{constructor(){super(...arguments),this._hass=null,this._viewMode="live",this._interactionTimerID=null,this._webrtcElement=null,this._requestedEvent=null,this._eventBeingShown=null,this._clipPlaying=!1}static async getConfigElement(){return document.createElement("frigate-card-editor")}static getStubConfig(){return{}}set hass(e){var t;this._webrtcElement&&(this._webrtcElement.hass=e),this._hass=e;const n=null===(t=this.shadowRoot)||void 0===t?void 0:t.getElementById(Tn.FRIGATE_CARD_MENU_ID);n&&(n.hass=e)}setConfig(e){if(!e)throw new Error($n("common.invalid_configuration:"));const t=yn.safeParse(e);if(!t.success){const e=t.error.format(),n=Object.keys(e).filter((e=>!e.startsWith("_")));throw new Error($n("common.invalid_configuration")+": "+n.join(", "))}const n=t.data;if(n.test_gui&&function(){var e=document.querySelector("home-assistant");if(e=(e=(e=(e=(e=(e=(e=(e=e&&e.shadowRoot)&&e.querySelector("home-assistant-main"))&&e.shadowRoot)&&e.querySelector("app-drawer-layout partial-panel-resolver"))&&e.shadowRoot||e)&&e.querySelector("ha-panel-lovelace"))&&e.shadowRoot)&&e.querySelector("hui-root")){var t=e.lovelace;return t.current_view=e.___curView,t}return null}().setEditMode(!0),!n.frigate_camera_name){if(!n.camera_entity.includes("."))throw new Error($n("common.invalid_configuration")+": camera_entity");n.frigate_camera_name=n.camera_entity.split(".",2)[1]}if("webrtc"==n.live_provider){const e=customElements.get("webrtc-camera");if(!e)throw new Error($n("common.missing_webrtc"));{const t=new e;t.setConfig(n.webrtc||{}),t.hass=this._hass,this._webrtcElement=t}}this.config=n,this._changeView()}_changeView(e,t){void 0!==e?this._viewMode=e:(this._viewMode=this.config.view_default,["clip","snapshot"].includes(this.config.view_default)&&(this._requestedEvent=null)),this._eventBeingShown=null,void 0!==t&&(this._requestedEvent=t)}shouldUpdate(e){if(!this.config)return!1;if(e.has("config"))return!0;const t=e.get("_hass");return!t||!this._clipPlaying&&Pn(this._hass,t,[this.config.camera_entity,this.config.motion_entity])}async _getEvents({has_clip:e=!1,has_snapshot:t=!1,limit:n=100}){let r=`${this.config.frigate_url}/api/events?camera=${this.config.frigate_camera_name}`;e&&(r+="&has_clip=1"),t&&(r+="&has_snapshot=1"),n>0&&(r+=`&limit=${n}`),this.config.label&&(r+=`&label=${this.config.label}`),this.config.zone&&(r+=`&zone=${this.config.zone}`);const i=await fetch(r);if(!i.ok){const e=`Frigate API request failed with status: ${i.status}`;throw console.warn(e),new Error(e)}{let e;try{e=await i.json()}catch(e){throw console.warn(e),new Error(`Could not JSON decode Frigate API response: ${e}`)}try{return bn.parse(e)}catch(e){throw console.warn(e),new Error(`Frigate events were malformed: ${e}`)}}}_renderAttentionIcon(e,t=null){return V` <div class="frigate-card-attention">
      <ha-icon data-toggle="tooltip" title=${t||""} icon="${e}">
      </ha-icon>
    </div>`}_renderError(e){return this._renderAttentionIcon("mdi:alert-circle",e)}_getEventTitle(e){const t=On.unix(e.end_time).tz("UTC").local().format("YYYY-MM-DD HH:mm:ss"),n=Math.trunc(e.end_time>e.start_time?e.end_time-e.start_time:0),r=Math.trunc(100*e.top_score);return`${t} [${n}s, ${e.label.charAt(0).toUpperCase()+e.label.slice(1)} ${r}%]`}async _renderEvents(){const e="clips"==this._viewMode;let t;try{t=await this._getEvents({has_clip:e,has_snapshot:!e})}catch(e){return this._renderError(e)}return t.length?V` <ul class="mdc-image-list frigate-card-image-list">
      ${t.map((t=>V` <li class="mdc-image-list__item">
          <div class="mdc-image-list__image-aspect-container">
            <img
              data-toggle="tooltip"
              title="${this._getEventTitle(t)}"
              class="mdc-image-list__image"
              src="data:image/png;base64,${t.thumbnail}"
              @click=${()=>{this._changeView(e?"clip":"snapshot",t)}}
            />
          </div>
        </li>`))}
    </ul>`:this._renderAttentionIcon(e?"mdi:filmstrip-off":"mdi:camera-off",e?"No clips":"No snapshots")}_renderProgressIndicator(){return V` <div class="frigate-card-attention">
      <ha-circular-progress active="true" size="large"></ha-circular-progress>
    </div>`}_controlVideos({stop:e,control_live:t=!1,control_clip:n=!1}){var r,i,o,a,s,u,c;const l=(e,t,n)=>{if(n)if(e)n.pause(),n.currentTime=0;else if(t){if(!this._webrtcElement){const e=n.duration;n.currentTime=e}n.play()}};this.shadowRoot&&(n&&l(e,!1,null===(r=this.shadowRoot)||void 0===r?void 0:r.querySelector("video.frigate-card-viewer")),t&&(this._webrtcElement?l(e,!0,null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector("webrtc-camera video")):l(e,!0,null===(c=null===(u=null===(s=null===(a=null===(o=this.shadowRoot)||void 0===o?void 0:o.querySelector("ha-camera-stream"))||void 0===a?void 0:a.shadowRoot)||void 0===s?void 0:s.querySelector("ha-hls-player"))||void 0===u?void 0:u.shadowRoot)||void 0===c?void 0:c.querySelector("video"))))}_menuActionHandler(e){switch(e){case"default":this._controlVideos({stop:!0,control_clip:!0}),this._controlVideos({stop:!0,control_live:!0}),this._changeView();break;case"live":this._controlVideos({stop:!0,control_clip:!0}),this._controlVideos({stop:!1,control_live:!0}),this._changeView(e);break;case"clips":this._controlVideos({stop:!0,control_live:!0}),this._changeView(e);break;case"snapshots":this._controlVideos({stop:!0,control_clip:!0,control_live:!0}),this._changeView(e);break;case"frigate-ui":window.open(this._getFrigateURLFromContext());break;case"motion":this.config.motion_entity&&xe(this,"hass-more-info",{entityId:this.config.motion_entity});break;default:console.warn("Unknown Frigate card menu option.")}}_getFrigateURLFromContext(){return this._eventBeingShown?`${this.config.frigate_url}/events/${this._eventBeingShown.id}`:`${this.config.frigate_url}/cameras/${this.config.frigate_camera_name}`}_getClipURLFromEvent(e){return e.has_clip?`${this.config.frigate_url}/clips/${e.camera}-${e.id}.mp4`:null}_getSnapshotURLFromEvent(e){return e.has_snapshot?`${this.config.frigate_url}/clips/${e.camera}-${e.id}.jpg`:null}async _renderClipPlayer(){let e,t,n=!0;if(this._requestedEvent)e=this._requestedEvent;else{try{t=await this._getEvents({has_clip:!0,limit:1})}catch(e){return this._renderError(e)}if(!t.length)return this._renderAttentionIcon("mdi:camera-off","No recent clip");e=t[0],n=this.config.autoplay_clip}const r=this._getClipURLFromEvent(e);return r?(this._eventBeingShown=e,V`
      <video
        class="frigate-card-viewer"
        muted
        controls
        playsinline
        @play=${()=>{this._clipPlaying=!0}}
        @pause=${()=>{this._clipPlaying=!1}}
        ?autoplay="${n}"
      >
        <source src="${r}" type="video/mp4" />
      </video>
    `):this._renderAttentionIcon("mdi:camera-off","No recent clip")}async _renderSnapshotViewer(){let e,t;if(this._requestedEvent)e=this._requestedEvent;else{try{t=await this._getEvents({has_snapshot:!0,limit:1})}catch(e){return this._renderError(e)}if(!t.length)return this._renderAttentionIcon("mdi:filmstrip-off","No recent snapshots");e=t[0]}const n=this._getSnapshotURLFromEvent(e);return n?(this._eventBeingShown=e,V` <img
      class="frigate-card-viewer"
      src="${n}"
      @click=${()=>{e.has_clip&&this._changeView("clip",e)}}
    />`):this._renderAttentionIcon("mdi:filmstrip-off","No recent snapshots")}_renderLiveViewer(){return this._hass&&this.config.camera_entity in this._hass.states?this._webrtcElement?V`${this._webrtcElement}`:V` <ha-camera-stream
      .hass=${this._hass}
      .stateObj=${this._hass.states[this.config.camera_entity]}
      .controls=${!0}
      .muted=${!0}
    >
    </ha-camera-stream>`:this._renderAttentionIcon("mdi:camera-off","No live camera")}_interactionHandler(){this.config.view_timeout&&(this._interactionTimerID&&window.clearTimeout(this._interactionTimerID),this._interactionTimerID=window.setTimeout((()=>{this._interactionTimerID=null,this._changeView()}),1e3*this.config.view_timeout))}_renderMenu(){return V`
      <frigate-card-menu
        id="${Tn.FRIGATE_CARD_MENU_ID}"
        .motionEntity=${this.config.motion_entity}
        .hass=${this._hass}
        .actionCallback=${this._menuActionHandler.bind(this)}
        .menuMode=${this.config.menu_mode}
      ></frigate-card-menu>
    `}render(){return this.config.show_warning?this._showWarning($n("common.show_warning")):this.config.show_error?this._showError($n("common.show_error")):V` <ha-card @click=${this._interactionHandler}>
      ${"below"!=this.config.menu_mode?this._renderMenu():""}
      <div class="frigate-card-contents">
        ${"clips"==this._viewMode?V`<div class="frigate-card-gallery">
              ${oe(this._renderEvents(),this._renderProgressIndicator())}
            </div>`:""}
        ${"snapshots"==this._viewMode?V`<div class="frigate-card-gallery">
              ${oe(this._renderEvents(),this._renderProgressIndicator())}
            </div>`:""}
        ${"clip"==this._viewMode?V`<div class="frigate-card-viewer">
              ${oe(this._renderClipPlayer(),this._renderProgressIndicator())}
            </div>`:""}
        ${"snapshot"==this._viewMode?V`<div class="frigate-card-viewer">
              ${oe(this._renderSnapshotViewer(),this._renderProgressIndicator())}
            </div>`:""}
        ${"live"==this._viewMode?V`<div class="frigate-card-viewer">${this._renderLiveViewer()}</div>`:""}
      </div>
      ${"below"==this.config.menu_mode?this._renderMenu():""}
    </ha-card>`}_showWarning(e){return V` <hui-warning> ${e} </hui-warning> `}_showError(e){const t=document.createElement("hui-error-card");return t.setConfig({type:"error",error:e,origConfig:this.config}),V` ${t} `}static get styles(){return te(".mdc-image-list {\n  display: flex;\n  flex-wrap: wrap;\n  margin: 0 auto;\n  padding: 0;\n}\n\n.mdc-image-list__item,\n.mdc-image-list__image-aspect-container {\n  position: relative;\n  box-sizing: border-box;\n}\n\n.mdc-image-list__item {\n  list-style-type: none;\n}\n\n.mdc-image-list__image {\n  width: 100%;\n}\n\n.mdc-image-list__image-aspect-container .mdc-image-list__image {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n}\n\n.mdc-image-list__image-aspect-container {\n  padding-bottom: calc(100% / 1);\n}\n\n.mdc-image-list__image {\n  border-radius: 0;\n}\n\n.mdc-image-list--with-text-protection .mdc-image-list__supporting {\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  border-bottom-left-radius: 0;\n}\n\n.mdc-image-list__supporting {\n  color: rgba(0, 0, 0, 0.87);\n  /* @alternate */\n  color: var(--mdc-theme-text-primary-on-background, rgba(0, 0, 0, 0.87));\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  box-sizing: border-box;\n  padding: 8px 0;\n  line-height: 24px;\n}\n\n.mdc-image-list__label {\n  -moz-osx-font-smoothing: grayscale;\n  -webkit-font-smoothing: antialiased;\n  font-family: Roboto, sans-serif;\n  /* @alternate */\n  font-family: var(--mdc-typography-subtitle1-font-family, var(--mdc-typography-font-family, Roboto, sans-serif));\n  font-size: 1rem;\n  /* @alternate */\n  font-size: var(--mdc-typography-subtitle1-font-size, 1rem);\n  line-height: 1.75rem;\n  /* @alternate */\n  line-height: var(--mdc-typography-subtitle1-line-height, 1.75rem);\n  font-weight: 400;\n  /* @alternate */\n  font-weight: var(--mdc-typography-subtitle1-font-weight, 400);\n  letter-spacing: 0.009375em;\n  /* @alternate */\n  letter-spacing: var(--mdc-typography-subtitle1-letter-spacing, 0.009375em);\n  text-decoration: inherit;\n  /* @alternate */\n  text-decoration: var(--mdc-typography-subtitle1-text-decoration, inherit);\n  text-transform: inherit;\n  /* @alternate */\n  text-transform: var(--mdc-typography-subtitle1-text-transform, inherit);\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n}\n\n.mdc-image-list--with-text-protection .mdc-image-list__supporting {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 48px;\n  padding: 0 16px;\n  background: rgba(0, 0, 0, 0.6);\n  color: #fff;\n}\n\n.mdc-image-list--masonry {\n  display: block;\n}\n.mdc-image-list--masonry .mdc-image-list__item {\n  break-inside: avoid-column;\n}\n.mdc-image-list--masonry .mdc-image-list__image {\n  display: block;\n  height: auto;\n}\n\n.frigate-card-contents {\n  width: 100%;\n}\n\n.frigate-card-viewer {\n  width: 100%;\n}\n\n.frigate-card-gallery {\n  overflow: auto;\n  aspect-ratio: 16/9;\n  -ms-overflow-style: none;\n  /* Hide scrollbar: IE and Edge */\n  scrollbar-width: none;\n  /* Hide scrollbar: Firefox */\n  max-height: 277px;\n  /* Safari does not support aspect-ratio yet */\n}\n\n/* Hide scrollbar for Chrome, Safari and Opera */\n.frigate-card-gallery::-webkit-scrollbar {\n  display: none;\n}\n\n.frigate-card-attention {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n}\n\n.frigate-card-image-list .mdc-image-list__item {\n  width: calc( 100% / 5 - 1.2px );\n  margin: 0.5px;\n}\n.frigate-card-image-list .mdc-image-list__image {\n  border-radius: 5px;\n}\n.frigate-card-image-list.mdc-image-list--with-text-protection .mdc-image-list__supporting {\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 5px;\n  border-bottom-left-radius: 5px;\n}\n\nvideo, img {\n  display: block;\n}\n\nha-card {\n  display: flex;\n  flex-direction: column;\n  margin: auto;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  position: relative;\n  background-color: var(--secondary-background-color, black);\n  transform-style: preserve-3d;\n  /* Safari brings video elements forward without this */\n}\n\n/* Don't drop shadow or have radius for nested cards: webrtc */\nha-card ha-card {\n  box-shadow: none;\n  border-radius: 0px;\n  background-color: var(--secondary-background-color, black);\n}")}static getCardSize(){return 5}};e([J({attribute:!1})],In.prototype,"_hass",void 0),e([G()],In.prototype,"config",void 0),e([J({attribute:!1})],In.prototype,"_viewMode",void 0),e([J({attribute:!1})],In.prototype,"_requestedEvent",void 0),In=e([B("frigate-card")],In);export{In as FrigateCard,Tn as FrigateCardMenu};
