# ############################################################
#
#  scripts sending infos into the notification group at Telegram
#
# ############################################################

# --------------------------------------------------------------
# sending a text message
# --------------------------------------------------------------
tg_txt_notification:
  alias: Send text message via Telegram
  description: This script sends a text message given as a parameter
  fields:
    msg_title:
      description: 'The title of the notification'
      example: 'State change'
    msg_message:
      description: 'The message content'
      example: 'The light is on!'
  sequence:
    - service: notify.tg_notification_grp
      data_template:
        title: "{{ msg_title }}"
        message: "{{ msg_message }}\ncurrent TS: {{ (now().timestamp())
                   | timestamp_custom('%Y%m%d_%H%M%S') }}"

# --------------------------------------------------------------
# sending a file
# --------------------------------------------------------------
tg_file_notification:
  alias: Send file via Telegram
  description: This script sends a file given as a parameter
  fields:
    msg_filename:
      description: 'The name of the file'
      example: '/config/var/opt/tg/l9ttgocam01/1.jpg'
    msg_caption:
      description: 'The caption which goes along'
      example: 'area 1, photo 1'
  sequence:
    - service: notify.tg_notification_grp
      data_template:
        title: "m_title"
        message: "m_msg"
        data:
          photo:
            - file: "{{ msg_filename }}"
              caption: "{{ msg_caption }}\ncurrent TS: {{ (now().timestamp()) | timestamp_custom('%Y%m%d_%H%M%S') }}"

# --------------------------------------------------------------
# sending three files
# --------------------------------------------------------------
tg_files3_notification:
  alias: Send file via Telegram
  description: This script sends a file given as a parameter
  fields:
    msg_filename_1:
      description: 'The name of file #1'
      example: '/config/var/opt/tg/l9ttgocam01/1.jpg'
    msg_caption_1:
      description: 'The caption which goes along file #1'
      example: 'area 1, photo 1'
    msg_filename_2:
      description: 'The name of file #2'
      example: '/config/var/opt/tg/l9ttgocam01/2.jpg'
    msg_caption_2:
      description: 'The caption which goes along file #2'
      example: 'area 1, photo 2'
    msg_filename_3:
      description: 'The name of file #3'
      example: '/config/var/opt/tg/l9ttgocam01/3.jpg'
    msg_caption_3:
      description: 'The caption which goes along file #3'
      example: 'area 1, photo 3'
  sequence:
    - service: notify.tg_notification_grp
      data_template:
        title: "m_title"
        message: "m_msg"
        data:
          photo:
            - file: "{{ msg_filename_1 }}"
              caption: "{{ msg_caption_1 }}\ncurrent TS: {{ (now().timestamp()) | timestamp_custom('%Y%m%d_%H%M%S') }}"
            - file: "{{ msg_filename_2 }}"
              caption: "{{ msg_caption_2 }}\ncurrent TS: {{ (now().timestamp()) | timestamp_custom('%Y%m%d_%H%M%S') }}"
            - file: "{{ msg_filename_3 }}"
              caption: "{{ msg_caption_3 }}\ncurrent TS: {{ (now().timestamp())   | timestamp_custom('%Y%m%d_%H%M%S') }}"

# ############################################################
#  END OF FILE
# ############################################################

