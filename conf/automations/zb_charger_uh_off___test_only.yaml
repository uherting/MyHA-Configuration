# ############################################################
#
#  Turn the ZB plug off
#
# ############################################################

# ############################################################
#  Turn the ZB plug off UH test
# ############################################################
- alias: Turn the ZB plug UH off test
  id: "c8914562-7396-4753-9005-fd6bdef829ef"
  description: "This automation turns off the ZB plug UH"
  mode: single
  initial_state: true
  # --------------------- TRIGGER ---------------------
  # moved to blueprint

  # -------------------- CONDITIONS -------------------
  # moved to blueprint

  # --------------------- BLUEPRINT --------------------
  use_blueprint:
    path: uherting/smartphone_charging.yaml
    # ---------------------- INPUT ----------------------
    input:
      target_mode: "off"
      state_of_the_charger:
        entity: switch.zb_charger_uh
      required_state_of_the_charger: "on"
      smartphone_charged_percentage_now:
        # entity_id: sensor.spghnote8pro_battery_level
        entity_id: sensor.spuhnote10pro_battery_level
      max_charging_duration:
        entity_id: input_date
      min_charging_percentage:
        # entity_id: input_number.zb_charger_gh_min_percentage
        entity_id: input_number.zb_charger_uh_min_percentage
      max_charging_percentage:
        entity_id: input_number.zb_charger_gh_max_percentage
        # entity_id: input_number.zb_charger_uh_max_percentage
      min_percentage_emergency_charging:
        entity_id: input_number.zb_charger_gh_max_percentage
        # entity_id: input_number.zb_charger_uh_max_percentage
      max_percentage_emergency_charging:
        # entity_id: input_number.zb_charger_gh_max_percentage_emergency
        entity_id: input_number.zb_charger_gh_max_percentage_emergency
      delayed_charging_yn:
        # entity_id: input_boolean.zb_charger_gh_force_delayed
        entity_id: input_boolean.zb_charger_uh_force_delayed
      delayed_charging_start_time:
        # entity_id: input_datetime.zb_charger_gh_charging_delayed_start_at
        entity_id: input_datetime.zb_charger_uh_charging_delayed_start_at
      actions:
        service: switch.turn_off
        entity_id: switch.zb_charger_uh
############################################################
#  END OF FILE
# ############################################################
