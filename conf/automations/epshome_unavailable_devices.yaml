# ############################################################
#
#  Create notification with unavailable ESPHome devices
#
# ############################################################

# ############################################################
#  notify admin of unavailable ESPHome devices
# ############################################################
- alias: Notify admin of unavailable ESPHome devices
  id: "1ed7edf6-f99f-4038-a5a7-307e73282fab"
  mode: single
  initial_state: false

  # --------------------- TRIGGER ---------------------
  trigger:
    - platform: time_pattern
      # Matches every hour at 5 minutes past whole
      minutes: /2
  # -------------------- CONDITIONS -------------------
  # none whatsoever
  condition: []
  # --------------------- ACTIONS ---------------------
  action:
    - service: script.esphome_detect_unavailable_devices
      data_template:
        msg_title: "ESPHome"
        msg_text: "unavailable ESPHome devices list:"
        msg_receiver: "admin"
############################################################
#  END OF FILE
# ############################################################
