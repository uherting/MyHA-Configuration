# ############################################################
#
#  L2Bathroom01
#
# ############################################################


# ############################################################
#  Bathroom window open TG feedback
# ############################################################
- alias: L2 Bathroom window open TG feedback
  id: '66779e2c-40cb-485d-9c68-6d819197dc82'
  mode: single
  initial_state: true
# --------------------- TRIGGER ---------------------
  trigger:
    - platform: event
      event_type: telegram_callback
      event_data:
        data: "/L2BathroomWindow_ack"
# -------------------- CONDITIONS -------------------
  # none whatsoever
  condition: []
# --------------------- ACTIONS ---------------------
  action:
# ---------------- switch alert off -----------------
    - service: alert.turn_off
      target:
        entity_id: alert.l2_bathroom_window_open

# ############################################################
#  Bathroom window open
# ############################################################
- alias: L2 Bathroom window open
  id: '18f21f84-a67c-11eb-a2ec-07e7a0fc6bee'
  mode: single
  initial_state: false
# --------------------- TRIGGER ---------------------
  trigger:
    - platform: state
      entity_id: binary_sensor.l2_bathroom01_window
      to: 'on'
      for:
        hours: 0
        minutes: 10
# -------------------- CONDITIONS -------------------
  # none whatsoever
  condition: []
  # condition:
  #   - condition: time
  #     after: "06:00:00"
  #     before: "23:30:00"
# --------------------- ACTIONS ---------------------
  action:
# --------------------- NOTIFY ---------------------
    - service: script.tg_txt
      data_template:
        msg_title: "L2 bathroom notification"
        msg_text: "The bathroom window is still open"
        msg_receiver: "notify"

# ############################################################
#  END OF FILE
# ############################################################
